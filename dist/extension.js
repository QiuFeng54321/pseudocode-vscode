"use strict";var mc=Object.create;var qr=Object.defineProperty;var vc=Object.getOwnPropertyDescriptor;var yc=Object.getOwnPropertyNames;var Cc=Object.getPrototypeOf,_c=Object.prototype.hasOwnProperty;var L=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Rc=(t,e)=>{for(var r in e)qr(t,r,{get:e[r],enumerable:!0})},_o=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yc(e))!_c.call(t,i)&&i!==r&&qr(t,i,{get:()=>e[i],enumerable:!(n=vc(e,i))||n.enumerable});return t};var Jt=(t,e,r)=>(r=t!=null?mc(Cc(t)):{},_o(e||!t||!t.__esModule?qr(r,"default",{value:t,enumerable:!0}):r,t)),wc=t=>_o(qr({},"__esModule",{value:!0}),t);var Po=L((U,Eo)=>{U=Eo.exports=X;var ie;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ie=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:ie=function(){};U.SEMVER_SPEC_VERSION="2.0.0";var Cn=256,Ir=Number.MAX_SAFE_INTEGER||9007199254740991,yn=16,re=U.re=[],D=U.src=[],w=U.tokens={},To=0;function ee(t){w[t]=To++}ee("NUMERICIDENTIFIER");D[w.NUMERICIDENTIFIER]="0|[1-9]\\d*";ee("NUMERICIDENTIFIERLOOSE");D[w.NUMERICIDENTIFIERLOOSE]="[0-9]+";ee("NONNUMERICIDENTIFIER");D[w.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";ee("MAINVERSION");D[w.MAINVERSION]="("+D[w.NUMERICIDENTIFIER]+")\\.("+D[w.NUMERICIDENTIFIER]+")\\.("+D[w.NUMERICIDENTIFIER]+")";ee("MAINVERSIONLOOSE");D[w.MAINVERSIONLOOSE]="("+D[w.NUMERICIDENTIFIERLOOSE]+")\\.("+D[w.NUMERICIDENTIFIERLOOSE]+")\\.("+D[w.NUMERICIDENTIFIERLOOSE]+")";ee("PRERELEASEIDENTIFIER");D[w.PRERELEASEIDENTIFIER]="(?:"+D[w.NUMERICIDENTIFIER]+"|"+D[w.NONNUMERICIDENTIFIER]+")";ee("PRERELEASEIDENTIFIERLOOSE");D[w.PRERELEASEIDENTIFIERLOOSE]="(?:"+D[w.NUMERICIDENTIFIERLOOSE]+"|"+D[w.NONNUMERICIDENTIFIER]+")";ee("PRERELEASE");D[w.PRERELEASE]="(?:-("+D[w.PRERELEASEIDENTIFIER]+"(?:\\."+D[w.PRERELEASEIDENTIFIER]+")*))";ee("PRERELEASELOOSE");D[w.PRERELEASELOOSE]="(?:-?("+D[w.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+D[w.PRERELEASEIDENTIFIERLOOSE]+")*))";ee("BUILDIDENTIFIER");D[w.BUILDIDENTIFIER]="[0-9A-Za-z-]+";ee("BUILD");D[w.BUILD]="(?:\\+("+D[w.BUILDIDENTIFIER]+"(?:\\."+D[w.BUILDIDENTIFIER]+")*))";ee("FULL");ee("FULLPLAIN");D[w.FULLPLAIN]="v?"+D[w.MAINVERSION]+D[w.PRERELEASE]+"?"+D[w.BUILD]+"?";D[w.FULL]="^"+D[w.FULLPLAIN]+"$";ee("LOOSEPLAIN");D[w.LOOSEPLAIN]="[v=\\s]*"+D[w.MAINVERSIONLOOSE]+D[w.PRERELEASELOOSE]+"?"+D[w.BUILD]+"?";ee("LOOSE");D[w.LOOSE]="^"+D[w.LOOSEPLAIN]+"$";ee("GTLT");D[w.GTLT]="((?:<|>)?=?)";ee("XRANGEIDENTIFIERLOOSE");D[w.XRANGEIDENTIFIERLOOSE]=D[w.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";ee("XRANGEIDENTIFIER");D[w.XRANGEIDENTIFIER]=D[w.NUMERICIDENTIFIER]+"|x|X|\\*";ee("XRANGEPLAIN");D[w.XRANGEPLAIN]="[v=\\s]*("+D[w.XRANGEIDENTIFIER]+")(?:\\.("+D[w.XRANGEIDENTIFIER]+")(?:\\.("+D[w.XRANGEIDENTIFIER]+")(?:"+D[w.PRERELEASE]+")?"+D[w.BUILD]+"?)?)?";ee("XRANGEPLAINLOOSE");D[w.XRANGEPLAINLOOSE]="[v=\\s]*("+D[w.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+D[w.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+D[w.XRANGEIDENTIFIERLOOSE]+")(?:"+D[w.PRERELEASELOOSE]+")?"+D[w.BUILD]+"?)?)?";ee("XRANGE");D[w.XRANGE]="^"+D[w.GTLT]+"\\s*"+D[w.XRANGEPLAIN]+"$";ee("XRANGELOOSE");D[w.XRANGELOOSE]="^"+D[w.GTLT]+"\\s*"+D[w.XRANGEPLAINLOOSE]+"$";ee("COERCE");D[w.COERCE]="(^|[^\\d])(\\d{1,"+yn+"})(?:\\.(\\d{1,"+yn+"}))?(?:\\.(\\d{1,"+yn+"}))?(?:$|[^\\d])";ee("COERCERTL");re[w.COERCERTL]=new RegExp(D[w.COERCE],"g");ee("LONETILDE");D[w.LONETILDE]="(?:~>?)";ee("TILDETRIM");D[w.TILDETRIM]="(\\s*)"+D[w.LONETILDE]+"\\s+";re[w.TILDETRIM]=new RegExp(D[w.TILDETRIM],"g");var Tc="$1~";ee("TILDE");D[w.TILDE]="^"+D[w.LONETILDE]+D[w.XRANGEPLAIN]+"$";ee("TILDELOOSE");D[w.TILDELOOSE]="^"+D[w.LONETILDE]+D[w.XRANGEPLAINLOOSE]+"$";ee("LONECARET");D[w.LONECARET]="(?:\\^)";ee("CARETTRIM");D[w.CARETTRIM]="(\\s*)"+D[w.LONECARET]+"\\s+";re[w.CARETTRIM]=new RegExp(D[w.CARETTRIM],"g");var Sc="$1^";ee("CARET");D[w.CARET]="^"+D[w.LONECARET]+D[w.XRANGEPLAIN]+"$";ee("CARETLOOSE");D[w.CARETLOOSE]="^"+D[w.LONECARET]+D[w.XRANGEPLAINLOOSE]+"$";ee("COMPARATORLOOSE");D[w.COMPARATORLOOSE]="^"+D[w.GTLT]+"\\s*("+D[w.LOOSEPLAIN]+")$|^$";ee("COMPARATOR");D[w.COMPARATOR]="^"+D[w.GTLT]+"\\s*("+D[w.FULLPLAIN]+")$|^$";ee("COMPARATORTRIM");D[w.COMPARATORTRIM]="(\\s*)"+D[w.GTLT]+"\\s*("+D[w.LOOSEPLAIN]+"|"+D[w.XRANGEPLAIN]+")";re[w.COMPARATORTRIM]=new RegExp(D[w.COMPARATORTRIM],"g");var Ec="$1$2$3";ee("HYPHENRANGE");D[w.HYPHENRANGE]="^\\s*("+D[w.XRANGEPLAIN]+")\\s+-\\s+("+D[w.XRANGEPLAIN]+")\\s*$";ee("HYPHENRANGELOOSE");D[w.HYPHENRANGELOOSE]="^\\s*("+D[w.XRANGEPLAINLOOSE]+")\\s+-\\s+("+D[w.XRANGEPLAINLOOSE]+")\\s*$";ee("STAR");D[w.STAR]="(<|>)?=?\\s*\\*";for(Tt=0;Tt<To;Tt++)ie(Tt,D[Tt]),re[Tt]||(re[Tt]=new RegExp(D[Tt]));var Tt;U.parse=At;function At(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof X)return t;if(typeof t!="string"||t.length>Cn)return null;var r=e.loose?re[w.LOOSE]:re[w.FULL];if(!r.test(t))return null;try{return new X(t,e)}catch{return null}}U.valid=Pc;function Pc(t,e){var r=At(t,e);return r?r.version:null}U.clean=Dc;function Dc(t,e){var r=At(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}U.SemVer=X;function X(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof X){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Cn)throw new TypeError("version is longer than "+Cn+" characters");if(!(this instanceof X))return new X(t,e);ie("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?re[w.LOOSE]:re[w.FULL]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ir||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ir||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ir||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Ir)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};X.prototype.toString=function(){return this.version};X.prototype.compare=function(t){return ie("SemVer.compare",this.version,this.options,t),t instanceof X||(t=new X(t,this.options)),this.compareMain(t)||this.comparePre(t)};X.prototype.compareMain=function(t){return t instanceof X||(t=new X(t,this.options)),Ft(this.major,t.major)||Ft(this.minor,t.minor)||Ft(this.patch,t.patch)};X.prototype.comparePre=function(t){if(t instanceof X||(t=new X(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(ie("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ft(r,n)}while(++e)};X.prototype.compareBuild=function(t){t instanceof X||(t=new X(t,this.options));var e=0;do{var r=this.build[e],n=t.build[e];if(ie("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ft(r,n)}while(++e)};X.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};U.inc=bc;function bc(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new X(t,r).inc(e,n).version}catch{return null}}U.diff=Oc;function Oc(t,e){if(_n(t,e))return null;var r=At(t),n=At(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var u in r)if((u==="major"||u==="minor"||u==="patch")&&r[u]!==n[u])return i+u;return o}U.compareIdentifiers=Ft;var Ro=/^[0-9]+$/;function Ft(t,e){var r=Ro.test(t),n=Ro.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}U.rcompareIdentifiers=xc;function xc(t,e){return Ft(e,t)}U.major=kc;function kc(t,e){return new X(t,e).major}U.minor=qc;function qc(t,e){return new X(t,e).minor}U.patch=Ic;function Ic(t,e){return new X(t,e).patch}U.compare=dt;function dt(t,e,r){return new X(t,r).compare(new X(e,r))}U.compareLoose=Nc;function Nc(t,e){return dt(t,e,!0)}U.compareBuild=Lc;function Lc(t,e,r){var n=new X(t,r),i=new X(e,r);return n.compare(i)||n.compareBuild(i)}U.rcompare=Fc;function Fc(t,e,r){return dt(e,t,r)}U.sort=Ac;function Ac(t,e){return t.sort(function(r,n){return U.compareBuild(r,n,e)})}U.rsort=Mc;function Mc(t,e){return t.sort(function(r,n){return U.compareBuild(n,r,e)})}U.gt=gr;function gr(t,e,r){return dt(t,e,r)>0}U.lt=Nr;function Nr(t,e,r){return dt(t,e,r)<0}U.eq=_n;function _n(t,e,r){return dt(t,e,r)===0}U.neq=So;function So(t,e,r){return dt(t,e,r)!==0}U.gte=Rn;function Rn(t,e,r){return dt(t,e,r)>=0}U.lte=wn;function wn(t,e,r){return dt(t,e,r)<=0}U.cmp=Lr;function Lr(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return _n(t,r,n);case"!=":return So(t,r,n);case">":return gr(t,r,n);case">=":return Rn(t,r,n);case"<":return Nr(t,r,n);case"<=":return wn(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}U.Comparator=$e;function $e(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof $e){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof $e))return new $e(t,e);ie("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Vt?this.value="":this.value=this.operator+this.semver.version,ie("comp",this)}var Vt={};$e.prototype.parse=function(t){var e=this.options.loose?re[w.COMPARATORLOOSE]:re[w.COMPARATOR],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new X(r[2],this.options.loose):this.semver=Vt};$e.prototype.toString=function(){return this.value};$e.prototype.test=function(t){if(ie("Comparator.test",t,this.options.loose),this.semver===Vt||t===Vt)return!0;if(typeof t=="string")try{t=new X(t,this.options)}catch{return!1}return Lr(t,this.operator,this.semver,this.options)};$e.prototype.intersects=function(t,e){if(!(t instanceof $e))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return this.value===""?!0:(r=new de(t.value,e),Fr(this.value,r,e));if(t.operator==="")return t.value===""?!0:(r=new de(this.value,e),Fr(t.semver,r,e));var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,u=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),p=Lr(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),f=Lr(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&u||p||f};U.Range=de;function de(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof de)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new de(t.raw,e);if(t instanceof $e)return new de(t.value,e);if(!(this instanceof de))return new de(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}de.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};de.prototype.toString=function(){return this.range};de.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?re[w.HYPHENRANGELOOSE]:re[w.HYPHENRANGE];t=t.replace(r,Xc),ie("hyphen replace",t),t=t.replace(re[w.COMPARATORTRIM],Ec),ie("comparator trim",t,re[w.COMPARATORTRIM]),t=t.replace(re[w.TILDETRIM],Tc),t=t.replace(re[w.CARETTRIM],Sc),t=t.split(/\s+/).join(" ");var n=e?re[w.COMPARATORLOOSE]:re[w.COMPARATOR],i=t.split(" ").map(function(o){return Hc(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new $e(o,this.options)},this),i};de.prototype.intersects=function(t,e){if(!(t instanceof de))throw new TypeError("a Range is required");return this.set.some(function(r){return wo(r,e)&&t.set.some(function(n){return wo(n,e)&&r.every(function(i){return n.every(function(o){return i.intersects(o,e)})})})})};function wo(t,e){for(var r=!0,n=t.slice(),i=n.pop();r&&n.length;)r=n.every(function(o){return i.intersects(o,e)}),i=n.pop();return r}U.toComparators=jc;function jc(t,e){return new de(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Hc(t,e){return ie("comp",t,e),t=Kc(t,e),ie("caret",t),t=Wc(t,e),ie("tildes",t),t=Uc(t,e),ie("xrange",t),t=Bc(t,e),ie("stars",t),t}function xe(t){return!t||t.toLowerCase()==="x"||t==="*"}function Wc(t,e){return t.trim().split(/\s+/).map(function(r){return zc(r,e)}).join(" ")}function zc(t,e){var r=e.loose?re[w.TILDELOOSE]:re[w.TILDE];return t.replace(r,function(n,i,o,u,p){ie("tilde",t,n,i,o,u,p);var f;return xe(i)?f="":xe(o)?f=">="+i+".0.0 <"+(+i+1)+".0.0":xe(u)?f=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":p?(ie("replaceTilde pr",p),f=">="+i+"."+o+"."+u+"-"+p+" <"+i+"."+(+o+1)+".0"):f=">="+i+"."+o+"."+u+" <"+i+"."+(+o+1)+".0",ie("tilde return",f),f})}function Kc(t,e){return t.trim().split(/\s+/).map(function(r){return $c(r,e)}).join(" ")}function $c(t,e){ie("caret",t,e);var r=e.loose?re[w.CARETLOOSE]:re[w.CARET];return t.replace(r,function(n,i,o,u,p){ie("caret",t,n,i,o,u,p);var f;return xe(i)?f="":xe(o)?f=">="+i+".0.0 <"+(+i+1)+".0.0":xe(u)?i==="0"?f=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":f=">="+i+"."+o+".0 <"+(+i+1)+".0.0":p?(ie("replaceCaret pr",p),i==="0"?o==="0"?f=">="+i+"."+o+"."+u+"-"+p+" <"+i+"."+o+"."+(+u+1):f=">="+i+"."+o+"."+u+"-"+p+" <"+i+"."+(+o+1)+".0":f=">="+i+"."+o+"."+u+"-"+p+" <"+(+i+1)+".0.0"):(ie("no pr"),i==="0"?o==="0"?f=">="+i+"."+o+"."+u+" <"+i+"."+o+"."+(+u+1):f=">="+i+"."+o+"."+u+" <"+i+"."+(+o+1)+".0":f=">="+i+"."+o+"."+u+" <"+(+i+1)+".0.0"),ie("caret return",f),f})}function Uc(t,e){return ie("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Gc(r,e)}).join(" ")}function Gc(t,e){t=t.trim();var r=e.loose?re[w.XRANGELOOSE]:re[w.XRANGE];return t.replace(r,function(n,i,o,u,p,f){ie("xRange",t,n,i,o,u,p,f);var m=xe(o),_=m||xe(u),y=_||xe(p),P=y;return i==="="&&P&&(i=""),f=e.includePrerelease?"-0":"",m?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&P?(_&&(u=0),p=0,i===">"?(i=">=",_?(o=+o+1,u=0,p=0):(u=+u+1,p=0)):i==="<="&&(i="<",_?o=+o+1:u=+u+1),n=i+o+"."+u+"."+p+f):_?n=">="+o+".0.0"+f+" <"+(+o+1)+".0.0"+f:y&&(n=">="+o+"."+u+".0"+f+" <"+o+"."+(+u+1)+".0"+f),ie("xRange return",n),n})}function Bc(t,e){return ie("replaceStars",t,e),t.trim().replace(re[w.STAR],"")}function Xc(t,e,r,n,i,o,u,p,f,m,_,y,P){return xe(r)?e="":xe(n)?e=">="+r+".0.0":xe(i)?e=">="+r+"."+n+".0":e=">="+e,xe(f)?p="":xe(m)?p="<"+(+f+1)+".0.0":xe(_)?p="<"+f+"."+(+m+1)+".0":y?p="<="+f+"."+m+"."+_+"-"+y:p="<="+p,(e+" "+p).trim()}de.prototype.test=function(t){if(!t)return!1;if(typeof t=="string")try{t=new X(t,this.options)}catch{return!1}for(var e=0;e<this.set.length;e++)if(Jc(this.set[e],t,this.options))return!0;return!1};function Jc(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(ie(t[n].semver),t[n].semver!==Vt&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}U.satisfies=Fr;function Fr(t,e,r){try{e=new de(e,r)}catch{return!1}return e.test(t)}U.maxSatisfying=Vc;function Vc(t,e,r){var n=null,i=null;try{var o=new de(e,r)}catch{return null}return t.forEach(function(u){o.test(u)&&(!n||i.compare(u)===-1)&&(n=u,i=new X(n,r))}),n}U.minSatisfying=Qc;function Qc(t,e,r){var n=null,i=null;try{var o=new de(e,r)}catch{return null}return t.forEach(function(u){o.test(u)&&(!n||i.compare(u)===1)&&(n=u,i=new X(n,r))}),n}U.minVersion=Yc;function Yc(t,e){t=new de(t,e);var r=new X("0.0.0");if(t.test(r)||(r=new X("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var u=new X(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!r||gr(r,u))&&(r=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}U.validRange=Zc;function Zc(t,e){try{return new de(t,e).range||"*"}catch{return null}}U.ltr=eu;function eu(t,e,r){return Tn(t,e,"<",r)}U.gtr=tu;function tu(t,e,r){return Tn(t,e,">",r)}U.outside=Tn;function Tn(t,e,r,n){t=new X(t,n),e=new de(e,n);var i,o,u,p,f;switch(r){case">":i=gr,o=wn,u=Nr,p=">",f=">=";break;case"<":i=Nr,o=Rn,u=gr,p="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Fr(t,e,n))return!1;for(var m=0;m<e.set.length;++m){var _=e.set[m],y=null,P=null;if(_.forEach(function(x){x.semver===Vt&&(x=new $e(">=0.0.0")),y=y||x,P=P||x,i(x.semver,y.semver,n)?y=x:u(x.semver,P.semver,n)&&(P=x)}),y.operator===p||y.operator===f||(!P.operator||P.operator===p)&&o(t,P.semver))return!1;if(P.operator===f&&u(t,P.semver))return!1}return!0}U.prerelease=ru;function ru(t,e){var r=At(t,e);return r&&r.prerelease.length?r.prerelease:null}U.intersects=nu;function nu(t,e,r){return t=new de(t,r),e=new de(e,r),t.intersects(e)}U.coerce=iu;function iu(t,e){if(t instanceof X)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};var r=null;if(!e.rtl)r=t.match(re[w.COERCE]);else{for(var n;(n=re[w.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),re[w.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;re[w.COERCERTL].lastIndex=-1}return r===null?null:At(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),e)}});var Qt=L(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});function su(t){return t===!0||t===!1}Ue.boolean=su;function Do(t){return typeof t=="string"||t instanceof String}Ue.string=Do;function ou(t){return typeof t=="number"||t instanceof Number}Ue.number=ou;function au(t){return t instanceof Error}Ue.error=au;function bo(t){return typeof t=="function"}Ue.func=bo;function Oo(t){return Array.isArray(t)}Ue.array=Oo;function cu(t){return Oo(t)&&t.every(e=>Do(e))}Ue.stringArray=cu;function uu(t,e){return Array.isArray(t)&&t.every(e)}Ue.typedArray=uu;function xo(t){return t&&bo(t.then)}Ue.thenable=xo;function lu(t){return t instanceof Promise?t:xo(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}Ue.asPromise=lu});var ft=L(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Sn;function En(){if(Sn===void 0)throw new Error("No runtime abstraction layer installed");return Sn}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Sn=r}t.install=e})(En||(En={}));Pn.default=En});var Dn=L(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});var du;(function(t){function e(r){return{dispose:r}}t.create=e})(du=Ar.Disposable||(Ar.Disposable={}))});var No=L(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var fu=ft(),Mt=Dn(),hu=require("util"),bn=8192,ko=Buffer.from("\r","ascii")[0],qo=Buffer.from(`
`,"ascii")[0],pu=`\r
`,On=class{constructor(e="utf-8"){this._encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(bn)}get encoding(){return this._encoding}append(e){let r;if(typeof e=="string"?r=Buffer.from(e,this._encoding):r=e,this.buffer.length-this.index>=r.length)this.buffer.set(r,this.index);else{var n=(Math.ceil((this.index+r.length)/bn)+1)*bn;this.index===0?(this.buffer=Buffer.allocUnsafe(n),this.buffer.set(r)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),r],n)}this.index+=r.length}tryReadHeaders(){let e=0;for(;e+3<this.index&&(this.buffer[e]!==ko||this.buffer[e+1]!==qo||this.buffer[e+2]!==ko||this.buffer[e+3]!==qo);)e++;if(e+3>=this.index)return;let r=new Map;this.buffer.toString("ascii",0,e).split(pu).forEach(o=>{let u=o.indexOf(":");if(u===-1)throw new Error("Message header must separate key and value using :");let p=o.substr(0,u),f=o.substr(u+1).trim();r.set(p,f)});let i=e+4;return this.buffer=this.buffer.slice(i),this.index=this.index-i,r}tryReadBody(e){if(this.index<e)return;let r=Buffer.alloc(e);this.buffer.copy(r,0,0,e);let n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,r}get numberOfBytes(){return this.index}},xn=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Mt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Mt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Mt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Mt.Disposable.create(()=>this.stream.off("data",e))}},kn=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Mt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Mt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Mt.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=u=>{u==null?n():i(u)};typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},Io=Object.freeze({messageBuffer:Object.freeze({create:t=>new On(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new hu.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new xn(t),asWritableStream:t=>new kn(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){return setTimeout(t,e,...r)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function qn(){return Io}(function(t){function e(){fu.default.install(Io)}t.install=e})(qn||(qn={}));In.default=qn});var Yt=L(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});function gu(t){return t===!0||t===!1}ht.boolean=gu;function Lo(t){return typeof t=="string"||t instanceof String}ht.string=Lo;function mu(t){return typeof t=="number"||t instanceof Number}ht.number=mu;function vu(t){return t instanceof Error}ht.error=vu;function yu(t){return typeof t=="function"}ht.func=yu;function Fo(t){return Array.isArray(t)}ht.array=Fo;function Cu(t){return Fo(t)&&t.every(e=>Lo(e))}ht.stringArray=Cu});var ri=L(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});var jt=Yt(),Ao;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.serverErrorStart=-32099,t.serverErrorEnd=-32e3,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.RequestCancelled=-32800,t.ContentModified=-32801,t.MessageWriteError=1,t.MessageReadError=2})(Ao=te.ErrorCodes||(te.ErrorCodes={}));var mr=class extends Error{constructor(e,r,n){super(r),this.code=jt.number(e)?e:Ao.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,mr.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};te.ResponseError=mr;var _e=class{constructor(e){this.kind=e}static is(e){return e===_e.auto||e===_e.byName||e===_e.byPosition}toString(){return this.kind}};te.ParameterStructures=_e;_e.auto=new _e("auto");_e.byPosition=new _e("byPosition");_e.byName=new _e("byName");var ue=class{constructor(e,r){this._method=e,this._numberOfParams=r}get method(){return this._method}get numberOfParams(){return this._numberOfParams}get parameterStructures(){return _e.auto}};te.AbstractMessageSignature=ue;var Nn=class extends ue{constructor(e){super(e,0)}};te.RequestType0=Nn;var Ln=class extends ue{constructor(e,r=_e.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};te.RequestType=Ln;var Fn=class extends ue{constructor(e,r=_e.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};te.RequestType1=Fn;var An=class extends ue{constructor(e){super(e,2)}};te.RequestType2=An;var Mn=class extends ue{constructor(e){super(e,3)}};te.RequestType3=Mn;var jn=class extends ue{constructor(e){super(e,4)}};te.RequestType4=jn;var Hn=class extends ue{constructor(e){super(e,5)}};te.RequestType5=Hn;var Wn=class extends ue{constructor(e){super(e,6)}};te.RequestType6=Wn;var zn=class extends ue{constructor(e){super(e,7)}};te.RequestType7=zn;var Kn=class extends ue{constructor(e){super(e,8)}};te.RequestType8=Kn;var $n=class extends ue{constructor(e){super(e,9)}};te.RequestType9=$n;var Un=class extends ue{constructor(e,r=_e.auto){super(e,1),this._parameterStructures=r,this._=void 0}get parameterStructures(){return this._parameterStructures}};te.NotificationType=Un;var Gn=class extends ue{constructor(e){super(e,0)}};te.NotificationType0=Gn;var Bn=class extends ue{constructor(e,r=_e.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};te.NotificationType1=Bn;var Xn=class extends ue{constructor(e){super(e,2)}};te.NotificationType2=Xn;var Jn=class extends ue{constructor(e){super(e,3)}};te.NotificationType3=Jn;var Vn=class extends ue{constructor(e){super(e,4)}};te.NotificationType4=Vn;var Qn=class extends ue{constructor(e){super(e,5)}};te.NotificationType5=Qn;var Yn=class extends ue{constructor(e){super(e,6)}};te.NotificationType6=Yn;var Zn=class extends ue{constructor(e){super(e,7)}};te.NotificationType7=Zn;var ei=class extends ue{constructor(e){super(e,8)}};te.NotificationType8=ei;var ti=class extends ue{constructor(e){super(e,9)}};te.NotificationType9=ti;function _u(t){let e=t;return e&&jt.string(e.method)&&(jt.string(e.id)||jt.number(e.id))}te.isRequestMessage=_u;function Ru(t){let e=t;return e&&jt.string(e.method)&&t.id===void 0}te.isNotificationMessage=Ru;function wu(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(jt.string(e.id)||jt.number(e.id)||e.id===null)}te.isResponseMessage=wu});var er=L(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});var Tu=ft(),Su;(function(t){let e={dispose(){}};t.None=function(){return e}})(Su=vr.Event||(vr.Event={}));var ni=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,u=n.length;o<u;o++)try{r.push(n[o].apply(i[o],e))}catch(p){Tu.default().console.error(p)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Zt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new ni),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=Zt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};vr.Emitter=Zt;Zt._noop=function(){}});var ai=L(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var Mo=ft(),Eu=Yt(),ii=er(),si;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ii.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ii.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Eu.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(si=yr.CancellationToken||(yr.CancellationToken={}));var Pu=Object.freeze(function(t,e){let r=Mo.default().timer.setTimeout(t.bind(e),0);return{dispose(){Mo.default().timer.clearTimeout(r)}}}),Mr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pu:(this._emitter||(this._emitter=new ii.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},oi=class{get token(){return this._token||(this._token=new Mr),this._token}cancel(){this._token?this._token.cancel():this._token=si.Cancelled}dispose(){this._token?this._token instanceof Mr&&this._token.dispose():this._token=si.None}};yr.CancellationTokenSource=oi});var jo=L(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var jr=ft(),tr=Yt(),ci=er(),Du;(function(t){function e(r){let n=r;return n&&tr.func(n.listen)&&tr.func(n.dispose)&&tr.func(n.onError)&&tr.func(n.onClose)&&tr.func(n.onPartialMessage)}t.is=e})(Du=rr.MessageReader||(rr.MessageReader={}));var Hr=class{constructor(){this.errorEmitter=new ci.Emitter,this.closeEmitter=new ci.Emitter,this.partialMessageEmitter=new ci.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${tr.string(e.message)?e.message:"unknown"}`)}};rr.AbstractMessageReader=Hr;var ui;(function(t){function e(r){var n;let i,o,u,p=new Map,f,m=new Map;if(r===void 0||typeof r=="string")i=r??"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(u=r.contentDecoder,p.set(u.name,u)),r.contentDecoders!==void 0)for(let _ of r.contentDecoders)p.set(_.name,_);if(r.contentTypeDecoder!==void 0&&(f=r.contentTypeDecoder,m.set(f.name,f)),r.contentTypeDecoders!==void 0)for(let _ of r.contentTypeDecoders)m.set(_.name,_)}return f===void 0&&(f=jr.default().applicationJson.decoder,m.set(f.name,f)),{charset:i,contentDecoder:u,contentDecoders:p,contentTypeDecoder:f,contentTypeDecoders:m}}t.fromOptions=e})(ui||(ui={}));var li=class extends Hr{constructor(e,r){super(),this.readable=e,this.options=ui.fromOptions(r),this.buffer=jr.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let o=i.get("Content-Length");if(!o)throw new Error("Header must provide a Content-Length property.");let u=parseInt(o);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(o=>{this.callback(o)},o=>{this.fireError(o)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(jr.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=jr.default().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};rr.ReadableStreamMessageReader=li});var Ho=L(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var bu=ft(),di=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||bu.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};fi.Semaphore=di});var $o=L(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});var Wo=ft(),Cr=Yt(),Ou=Ho(),zo=er(),xu="Content-Length: ",Ko=`\r
`,ku;(function(t){function e(r){let n=r;return n&&Cr.func(n.dispose)&&Cr.func(n.onClose)&&Cr.func(n.onError)&&Cr.func(n.write)}t.is=e})(ku=nr.MessageWriter||(nr.MessageWriter={}));var Wr=class{constructor(){this.errorEmitter=new zo.Emitter,this.closeEmitter=new zo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Cr.string(e.message)?e.message:"unknown"}`)}};nr.AbstractMessageWriter=Wr;var hi;(function(t){function e(r){var n,i;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:Wo.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:Wo.default().applicationJson.encoder}}t.fromOptions=e})(hi||(hi={}));var pi=class extends Wr{constructor(e,r){super(),this.writable=e,this.options=hi.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Ou.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(xu,n.byteLength.toString(),Ko),i.push(Ko),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}};nr.WriteableStreamMessageWriter=pi});var Uo=L(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});var ke;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ke=ir.Touch||(ir.Touch={}));var zr=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,r=ke.None){let n=this._map.get(e);if(!!n)return r!==ke.None&&this.touch(n,r),n.value}set(e,r,n=ke.None){let i=this._map.get(e);if(i)i.value=r,n!==ke.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case ke.None:this.addItemLast(i);break;case ke.First:this.addItemFirst(i);break;case ke.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ke.First&&r!==ke.Last)){if(r===ke.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===ke.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};ir.LinkedMap=zr;var gi=class extends zr{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=ke.AsNew){return super.get(e,r)}peek(e){return super.get(e,ke.None)}set(e,r){return super.set(e,r,ke.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ir.LRUCache=gi});var Vo=L(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var Go=ft(),Re=Yt(),$=ri(),Bo=Uo(),_r=er(),mi=ai(),Rr;(function(t){t.type=new $.NotificationType("$/cancelRequest")})(Rr||(Rr={}));var $r;(function(t){t.type=new $.NotificationType("$/progress")})($r||($r={}));var vi=class{constructor(){}};ne.ProgressType=vi;var yi;(function(t){function e(r){return Re.func(r)}t.is=e})(yi||(yi={}));ne.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var pe;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(pe=ne.Trace||(ne.Trace={}));(function(t){function e(n){if(!Re.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(pe=ne.Trace||(ne.Trace={}));var Qe;(function(t){t.Text="text",t.JSON="json"})(Qe=ne.TraceFormat||(ne.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(Qe=ne.TraceFormat||(ne.TraceFormat={}));var Xo;(function(t){t.type=new $.NotificationType("$/setTrace")})(Xo=ne.SetTraceNotification||(ne.SetTraceNotification={}));var Ci;(function(t){t.type=new $.NotificationType("$/logTrace")})(Ci=ne.LogTraceNotification||(ne.LogTraceNotification={}));var Kr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Kr=ne.ConnectionErrors||(ne.ConnectionErrors={}));var St=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,St.prototype)}};ne.ConnectionError=St;var Jo;(function(t){function e(r){let n=r;return n&&Re.func(n.cancelUndispatched)}t.is=e})(Jo=ne.ConnectionStrategy||(ne.ConnectionStrategy={}));var _i;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new mi.CancellationTokenSource}});function e(r){let n=r;return n&&Re.func(n.createCancellationTokenSource)}t.is=e})(_i=ne.CancellationReceiverStrategy||(ne.CancellationReceiverStrategy={}));var Ri;(function(t){t.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Rr.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Re.func(n.sendCancellation)&&Re.func(n.cleanup)}t.is=e})(Ri=ne.CancellationSenderStrategy||(ne.CancellationSenderStrategy={}));var wi;(function(t){t.Message=Object.freeze({receiver:_i.Message,sender:Ri.Message});function e(r){let n=r;return n&&_i.is(n.receiver)&&Ri.is(n.sender)}t.is=e})(wi=ne.CancellationStrategy||(ne.CancellationStrategy={}));var qu;(function(t){function e(r){let n=r;return n&&(wi.is(n.cancellationStrategy)||Jo.is(n.connectionStrategy))}t.is=e})(qu=ne.ConnectionOptions||(ne.ConnectionOptions={}));var Ye;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Ye||(Ye={}));function Iu(t,e,r,n){let i=r!==void 0?r:ne.NullLogger,o=0,u=0,p=0,f="2.0",m,_=Object.create(null),y,P=Object.create(null),x=new Map,G,z=new Bo.LinkedMap,B=Object.create(null),M=Object.create(null),q=pe.Off,j=Qe.Text,K,Ce=Ye.New,tt=new _r.Emitter,He=new _r.Emitter,qe=new _r.Emitter,be=new _r.Emitter,rt=new _r.Emitter,ve=n&&n.cancellationStrategy?n.cancellationStrategy:wi.Message;function We(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function nt(d){return d===null?"res-unknown-"+(++p).toString():"res-"+d.toString()}function mt(){return"not-"+(++u).toString()}function ze(d,R){$.isRequestMessage(R)?d.set(We(R.id),R):$.isResponseMessage(R)?d.set(nt(R.id),R):d.set(mt(),R)}function xt(d){}function vt(){return Ce===Ye.Listening}function st(){return Ce===Ye.Closed}function Ie(){return Ce===Ye.Disposed}function Xe(){(Ce===Ye.New||Ce===Ye.Listening)&&(Ce=Ye.Closed,He.fire(void 0))}function kt(d){tt.fire([d,void 0,void 0])}function yt(d){tt.fire(d)}t.onClose(Xe),t.onError(kt),e.onClose(Xe),e.onError(yt);function ot(){G||z.size===0||(G=Go.default().timer.setImmediate(()=>{G=void 0,qt()}))}function qt(){if(z.size===0)return;let d=z.shift();try{$.isRequestMessage(d)?Ct(d):$.isNotificationMessage(d)?ct(d):$.isResponseMessage(d)?_t(d):It(d)}finally{ot()}}let at=d=>{try{if($.isNotificationMessage(d)&&d.method===Rr.type.method){let R=We(d.params.id),b=z.get(R);if($.isRequestMessage(b)){let k=n?.connectionStrategy,N=k&&k.cancelUndispatched?k.cancelUndispatched(b,xt):void 0;if(N&&(N.error!==void 0||N.result!==void 0)){z.delete(R),N.id=b.id,Ne(N,d.method,Date.now()),e.write(N);return}}}ze(z,d)}finally{ot()}};function Ct(d){if(Ie())return;function R(v,O,F){let he={jsonrpc:f,id:d.id};v instanceof $.ResponseError?he.error=v.toJson():he.result=v===void 0?null:v,Ne(he,O,F),e.write(he)}function b(v,O,F){let he={jsonrpc:f,id:d.id,error:v.toJson()};Ne(he,O,F),e.write(he)}function k(v,O,F){v===void 0&&(v=null);let he={jsonrpc:f,id:d.id,result:v};Ne(he,O,F),e.write(he)}Nt(d);let N=_[d.method],Z,se;N&&(Z=N.type,se=N.handler);let s=Date.now();if(se||m){let v=String(d.id),O=ve.receiver.createCancellationTokenSource(v);M[v]=O;try{let F;if(se)if(d.params===void 0){if(Z!==void 0&&Z.numberOfParams!==0){b(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines ${Z.numberOfParams} params but recevied none.`),d.method,s);return}F=se(O.token)}else if(Array.isArray(d.params)){if(Z!==void 0&&Z.parameterStructures===$.ParameterStructures.byName){b(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,s);return}F=se(...d.params,O.token)}else{if(Z!==void 0&&Z.parameterStructures===$.ParameterStructures.byPosition){b(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,s);return}F=se(d.params,O.token)}else m&&(F=m(d.method,d.params,O.token));let he=F;F?he.then?he.then(Te=>{delete M[v],R(Te,d.method,s)},Te=>{delete M[v],Te instanceof $.ResponseError?b(Te,d.method,s):Te&&Re.string(Te.message)?b(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Te.message}`),d.method,s):b(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,s)}):(delete M[v],R(F,d.method,s)):(delete M[v],k(F,d.method,s))}catch(F){delete M[v],F instanceof $.ResponseError?R(F,d.method,s):F&&Re.string(F.message)?b(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${F.message}`),d.method,s):b(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,s)}}else b(new $.ResponseError($.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,s)}function _t(d){if(!Ie())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let R=String(d.id),b=B[R];if(Je(d,b),b){delete B[R];try{if(d.error){let k=d.error;b.reject(new $.ResponseError(k.code,k.message,k.data))}else if(d.result!==void 0)b.resolve(d.result);else throw new Error("Should never happen.")}catch(k){k.message?i.error(`Response handler '${b.method}' failed with message: ${k.message}`):i.error(`Response handler '${b.method}' failed unexpectedly.`)}}}}function ct(d){if(Ie())return;let R,b;if(d.method===Rr.type.method)b=k=>{let N=k.id,Z=M[String(N)];Z&&Z.cancel()};else{let k=P[d.method];k&&(b=k.handler,R=k.type)}if(b||y)try{Oe(d),b?d.params===void 0?(R!==void 0&&R.numberOfParams!==0&&R.parameterStructures!==$.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${R.numberOfParams} params but recevied none.`),b()):Array.isArray(d.params)?(R!==void 0&&(R.parameterStructures===$.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),R.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${R.numberOfParams} params but received ${d.params.length} argumennts`)),b(...d.params)):(R!==void 0&&R.parameterStructures===$.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),b(d.params)):y&&y(d.method,d.params)}catch(k){k.message?i.error(`Notification handler '${d.method}' failed with message: ${k.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else qe.fire(d)}function It(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let R=d;if(Re.string(R.id)||Re.number(R.id)){let b=String(R.id),k=B[b];k&&k.reject(new Error("The received response has neither a result nor an error property."))}}function ut(d){if(!(q===pe.Off||!K))if(j===Qe.Text){let R;q===pe.Verbose&&d.params&&(R=`Params: ${JSON.stringify(d.params,null,4)}

`),K.log(`Sending request '${d.method} - (${d.id})'.`,R)}else Ke("send-request",d)}function lt(d){if(!(q===pe.Off||!K))if(j===Qe.Text){let R;q===pe.Verbose&&(d.params?R=`Params: ${JSON.stringify(d.params,null,4)}

`:R=`No parameters provided.

`),K.log(`Sending notification '${d.method}'.`,R)}else Ke("send-notification",d)}function Ne(d,R,b){if(!(q===pe.Off||!K))if(j===Qe.Text){let k;q===pe.Verbose&&(d.error&&d.error.data?k=`Error data: ${JSON.stringify(d.error.data,null,4)}

`:d.result?k=`Result: ${JSON.stringify(d.result,null,4)}

`:d.error===void 0&&(k=`No result returned.

`)),K.log(`Sending response '${R} - (${d.id})'. Processing request took ${Date.now()-b}ms`,k)}else Ke("send-response",d)}function Nt(d){if(!(q===pe.Off||!K))if(j===Qe.Text){let R;q===pe.Verbose&&d.params&&(R=`Params: ${JSON.stringify(d.params,null,4)}

`),K.log(`Received request '${d.method} - (${d.id})'.`,R)}else Ke("receive-request",d)}function Oe(d){if(!(q===pe.Off||!K||d.method===Ci.type.method))if(j===Qe.Text){let R;q===pe.Verbose&&(d.params?R=`Params: ${JSON.stringify(d.params,null,4)}

`:R=`No parameters provided.

`),K.log(`Received notification '${d.method}'.`,R)}else Ke("receive-notification",d)}function Je(d,R){if(!(q===pe.Off||!K))if(j===Qe.Text){let b;if(q===pe.Verbose&&(d.error&&d.error.data?b=`Error data: ${JSON.stringify(d.error.data,null,4)}

`:d.result?b=`Result: ${JSON.stringify(d.result,null,4)}

`:d.error===void 0&&(b=`No result returned.

`)),R){let k=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";K.log(`Received response '${R.method} - (${d.id})' in ${Date.now()-R.timerStart}ms.${k}`,b)}else K.log(`Received response ${d.id} without active response promise.`,b)}else Ke("receive-response",d)}function Ke(d,R){if(!K||q===pe.Off)return;let b={isLSPMessage:!0,type:d,message:R,timestamp:Date.now()};K.log(b)}function Ve(){if(st())throw new St(Kr.Closed,"Connection is closed.");if(Ie())throw new St(Kr.Disposed,"Connection is disposed.")}function Rt(){if(vt())throw new St(Kr.AlreadyListening,"Connection is already listening")}function T(){if(!vt())throw new Error("Call listen() first.")}function h(d){return d===void 0?null:d}function C(d){if(d!==null)return d}function a(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function l(d,R){switch(d){case $.ParameterStructures.auto:return a(R)?C(R):[h(R)];case $.ParameterStructures.byName:if(!a(R))throw new Error("Recevied parameters by name but param is not an object literal.");return C(R);case $.ParameterStructures.byPosition:return[h(R)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function c(d,R){let b,k=d.numberOfParams;switch(k){case 0:b=void 0;break;case 1:b=l(d.parameterStructures,R[0]);break;default:b=[];for(let N=0;N<R.length&&N<k;N++)b.push(h(R[N]));if(R.length<k)for(let N=R.length;N<k;N++)b.push(null);break}return b}let S={sendNotification:(d,...R)=>{Ve();let b,k;if(Re.string(d)){b=d;let Z=R[0],se=0,s=$.ParameterStructures.auto;$.ParameterStructures.is(Z)&&(se=1,s=Z);let v=R.length,O=v-se;switch(O){case 0:k=void 0;break;case 1:k=l(s,R[se]);break;default:if(s===$.ParameterStructures.byName)throw new Error(`Recevied ${O} parameters for 'by Name' notification parameter structure.`);k=R.slice(se,v).map(F=>h(F));break}}else{let Z=R;b=d.method,k=c(d,Z)}let N={jsonrpc:f,method:b,params:k};lt(N),e.write(N)},onNotification:(d,R)=>{Ve(),Re.func(d)?y=d:R&&(Re.string(d)?P[d]={type:void 0,handler:R}:P[d.method]={type:d,handler:R})},onProgress:(d,R,b)=>{if(x.has(R))throw new Error(`Progress handler for token ${R} already registered`);return x.set(R,b),{dispose:()=>{x.delete(R)}}},sendProgress:(d,R,b)=>{S.sendNotification($r.type,{token:R,value:b})},onUnhandledProgress:be.event,sendRequest:(d,...R)=>{Ve(),T();let b,k,N;if(Re.string(d)){b=d;let v=R[0],O=R[R.length-1],F=0,he=$.ParameterStructures.auto;$.ParameterStructures.is(v)&&(F=1,he=v);let Te=R.length;mi.CancellationToken.is(O)&&(Te=Te-1,N=O);let Lt=Te-F;switch(Lt){case 0:k=void 0;break;case 1:k=l(he,R[F]);break;default:if(he===$.ParameterStructures.byName)throw new Error(`Recevied ${Lt} parameters for 'by Name' request parameter structure.`);k=R.slice(F,Te).map(wt=>h(wt));break}}else{let v=R;b=d.method,k=c(d,v);let O=d.numberOfParams;N=mi.CancellationToken.is(v[O])?v[O]:void 0}let Z=o++,se;return N&&(se=N.onCancellationRequested(()=>{ve.sender.sendCancellation(S,Z)})),new Promise((v,O)=>{let F={jsonrpc:f,id:Z,method:b,params:k},he=wt=>{v(wt),ve.sender.cleanup(Z),se?.dispose()},Te=wt=>{O(wt),ve.sender.cleanup(Z),se?.dispose()},Lt={method:b,timerStart:Date.now(),resolve:he,reject:Te};ut(F);try{e.write(F)}catch(wt){Lt.reject(new $.ResponseError($.ErrorCodes.MessageWriteError,wt.message?wt.message:"Unknown reason")),Lt=null}Lt&&(B[String(Z)]=Lt)})},onRequest:(d,R)=>{Ve(),yi.is(d)?m=d:Re.string(d)?R!==void 0&&(_[d]={handler:R,type:void 0}):R!==void 0&&(_[d.method]={type:d,handler:R})},trace:(d,R,b)=>{let k=!1,N=Qe.Text;b!==void 0&&(Re.boolean(b)?k=b:(k=b.sendNotification||!1,N=b.traceFormat||Qe.Text)),q=d,j=N,q===pe.Off?K=void 0:K=R,k&&!st()&&!Ie()&&S.sendNotification(Xo.type,{value:pe.toString(d)})},onError:tt.event,onClose:He.event,onUnhandledNotification:qe.event,onDispose:rt.event,dispose:()=>{if(Ie())return;Ce=Ye.Disposed,rt.fire(void 0);let d=new Error("Connection got disposed.");Object.keys(B).forEach(R=>{B[R].reject(d)}),B=Object.create(null),M=Object.create(null),z=new Bo.LinkedMap,Re.func(e.dispose)&&e.dispose(),Re.func(t.dispose)&&t.dispose()},listen:()=>{Ve(),Rt(),Ce=Ye.Listening,t.listen(at)},inspect:()=>{Go.default().console.log("inspect")}};return S.onNotification(Ci.type,d=>{q===pe.Off||!K||K.log(d.message,q===pe.Verbose?d.verbose:void 0)}),S.onNotification($r.type,d=>{let R=x.get(d.token);R?R(d.value):be.fire(d)}),S}ne.createMessageConnection=Iu});var Ei=L(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});var le=ri();H.RequestType=le.RequestType;H.RequestType0=le.RequestType0;H.RequestType1=le.RequestType1;H.RequestType2=le.RequestType2;H.RequestType3=le.RequestType3;H.RequestType4=le.RequestType4;H.RequestType5=le.RequestType5;H.RequestType6=le.RequestType6;H.RequestType7=le.RequestType7;H.RequestType8=le.RequestType8;H.RequestType9=le.RequestType9;H.ResponseError=le.ResponseError;H.ErrorCodes=le.ErrorCodes;H.NotificationType=le.NotificationType;H.NotificationType0=le.NotificationType0;H.NotificationType1=le.NotificationType1;H.NotificationType2=le.NotificationType2;H.NotificationType3=le.NotificationType3;H.NotificationType4=le.NotificationType4;H.NotificationType5=le.NotificationType5;H.NotificationType6=le.NotificationType6;H.NotificationType7=le.NotificationType7;H.NotificationType8=le.NotificationType8;H.NotificationType9=le.NotificationType9;H.ParameterStructures=le.ParameterStructures;var Nu=Dn();H.Disposable=Nu.Disposable;var Qo=er();H.Event=Qo.Event;H.Emitter=Qo.Emitter;var Yo=ai();H.CancellationTokenSource=Yo.CancellationTokenSource;H.CancellationToken=Yo.CancellationToken;var Ti=jo();H.MessageReader=Ti.MessageReader;H.AbstractMessageReader=Ti.AbstractMessageReader;H.ReadableStreamMessageReader=Ti.ReadableStreamMessageReader;var Si=$o();H.MessageWriter=Si.MessageWriter;H.AbstractMessageWriter=Si.AbstractMessageWriter;H.WriteableStreamMessageWriter=Si.WriteableStreamMessageWriter;var Le=Vo();H.ConnectionStrategy=Le.ConnectionStrategy;H.ConnectionOptions=Le.ConnectionOptions;H.NullLogger=Le.NullLogger;H.createMessageConnection=Le.createMessageConnection;H.ProgressType=Le.ProgressType;H.Trace=Le.Trace;H.TraceFormat=Le.TraceFormat;H.SetTraceNotification=Le.SetTraceNotification;H.LogTraceNotification=Le.LogTraceNotification;H.ConnectionErrors=Le.ConnectionErrors;H.ConnectionError=Le.ConnectionError;H.CancellationReceiverStrategy=Le.CancellationReceiverStrategy;H.CancellationSenderStrategy=Le.CancellationSenderStrategy;H.CancellationStrategy=Le.CancellationStrategy;var Lu=ft();H.RAL=Lu.default});var Me=L(Pe=>{"use strict";function Fu(t){for(var e in t)Pe.hasOwnProperty(e)||(Pe[e]=t[e])}Object.defineProperty(Pe,"__esModule",{value:!0});var wr=No();wr.default.install();var it=Ei(),Au=require("path"),Mu=require("os"),ju=require("crypto"),Br=require("net");Fu(Ei());var Pi=class extends it.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),it.Disposable.create(()=>this.process.off("message",e))}};Pe.IPCMessageReader=Pi;var Di=class extends it.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}};Pe.IPCMessageWriter=Di;var Ht=class extends it.ReadableStreamMessageReader{constructor(e,r="utf-8"){super(wr.default().stream.asReadableStream(e),r)}};Pe.SocketMessageReader=Ht;var Wt=class extends it.WriteableStreamMessageWriter{constructor(e,r){super(wr.default().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Pe.SocketMessageWriter=Wt;var Ur=class extends it.ReadableStreamMessageReader{constructor(e,r){super(wr.default().stream.asReadableStream(e),r)}};Pe.StreamMessageReader=Ur;var Gr=class extends it.WriteableStreamMessageWriter{constructor(e,r){super(wr.default().stream.asWritableStream(e),r)}};Pe.StreamMessageWriter=Gr;function Hu(){let t=ju.randomBytes(21).toString("hex");return process.platform==="win32"?`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`:Au.join(Mu.tmpdir(),`vscode-${t}.sock`)}Pe.generateRandomPipeName=Hu;function Wu(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let u=Br.createServer(p=>{u.close(),r([new Ht(p,e),new Wt(p,e)])});u.on("error",o),u.listen(t,()=>{u.removeListener("error",o),i({onConnected:()=>n})})})}Pe.createClientPipeTransport=Wu;function zu(t,e="utf-8"){let r=Br.createConnection(t);return[new Ht(r,e),new Wt(r,e)]}Pe.createServerPipeTransport=zu;function Ku(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let u=Br.createServer(p=>{u.close(),r([new Ht(p,e),new Wt(p,e)])});u.on("error",o),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",o),i({onConnected:()=>n})})})}Pe.createClientSocketTransport=Ku;function $u(t,e="utf-8"){let r=Br.createConnection(t,"127.0.0.1");return[new Ht(r,e),new Wt(r,e)]}Pe.createServerSocketTransport=$u;function Uu(t){return t.listen!==void 0&&t.read===void 0}function Gu(t){return t.write!==void 0&&t.end===void 0}function Bu(t,e,r,n){r||(r=it.NullLogger);let i=Uu(t)?t:new Ur(t),o=Gu(e)?e:new Gr(e);return it.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),it.createMessageConnection(i,o,r,n)}Pe.createMessageConnection=Bu});var Xr=L((Eh,Zo)=>{"use strict";Zo.exports=Me()});var ta=L((ea,Jr)=>{(function(t){if(typeof Jr=="object"&&typeof Jr.exports=="object"){var e=t(require,ea);e!==void 0&&(Jr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;(function(h){function C(l,c){return{line:l,character:c}}h.create=C;function a(l){var c=l;return T.objectLiteral(c)&&T.number(c.line)&&T.number(c.character)}h.is=a})(r=e.Position||(e.Position={}));var n;(function(h){function C(l,c,S,d){if(T.number(l)&&T.number(c)&&T.number(S)&&T.number(d))return{start:r.create(l,c),end:r.create(S,d)};if(r.is(l)&&r.is(c))return{start:l,end:c};throw new Error("Range#create called with invalid arguments["+l+", "+c+", "+S+", "+d+"]")}h.create=C;function a(l){var c=l;return T.objectLiteral(c)&&r.is(c.start)&&r.is(c.end)}h.is=a})(n=e.Range||(e.Range={}));var i;(function(h){function C(l,c){return{uri:l,range:c}}h.create=C;function a(l){var c=l;return T.defined(c)&&n.is(c.range)&&(T.string(c.uri)||T.undefined(c.uri))}h.is=a})(i=e.Location||(e.Location={}));var o;(function(h){function C(l,c,S,d){return{targetUri:l,targetRange:c,targetSelectionRange:S,originSelectionRange:d}}h.create=C;function a(l){var c=l;return T.defined(c)&&n.is(c.targetRange)&&T.string(c.targetUri)&&(n.is(c.targetSelectionRange)||T.undefined(c.targetSelectionRange))&&(n.is(c.originSelectionRange)||T.undefined(c.originSelectionRange))}h.is=a})(o=e.LocationLink||(e.LocationLink={}));var u;(function(h){function C(l,c,S,d){return{red:l,green:c,blue:S,alpha:d}}h.create=C;function a(l){var c=l;return T.number(c.red)&&T.number(c.green)&&T.number(c.blue)&&T.number(c.alpha)}h.is=a})(u=e.Color||(e.Color={}));var p;(function(h){function C(l,c){return{range:l,color:c}}h.create=C;function a(l){var c=l;return n.is(c.range)&&u.is(c.color)}h.is=a})(p=e.ColorInformation||(e.ColorInformation={}));var f;(function(h){function C(l,c,S){return{label:l,textEdit:c,additionalTextEdits:S}}h.create=C;function a(l){var c=l;return T.string(c.label)&&(T.undefined(c.textEdit)||M.is(c))&&(T.undefined(c.additionalTextEdits)||T.typedArray(c.additionalTextEdits,M.is))}h.is=a})(f=e.ColorPresentation||(e.ColorPresentation={}));var m;(function(h){h.Comment="comment",h.Imports="imports",h.Region="region"})(m=e.FoldingRangeKind||(e.FoldingRangeKind={}));var _;(function(h){function C(l,c,S,d,R){var b={startLine:l,endLine:c};return T.defined(S)&&(b.startCharacter=S),T.defined(d)&&(b.endCharacter=d),T.defined(R)&&(b.kind=R),b}h.create=C;function a(l){var c=l;return T.number(c.startLine)&&T.number(c.startLine)&&(T.undefined(c.startCharacter)||T.number(c.startCharacter))&&(T.undefined(c.endCharacter)||T.number(c.endCharacter))&&(T.undefined(c.kind)||T.string(c.kind))}h.is=a})(_=e.FoldingRange||(e.FoldingRange={}));var y;(function(h){function C(l,c){return{location:l,message:c}}h.create=C;function a(l){var c=l;return T.defined(c)&&i.is(c.location)&&T.string(c.message)}h.is=a})(y=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var P;(function(h){h.Error=1,h.Warning=2,h.Information=3,h.Hint=4})(P=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var x;(function(h){h.Unnecessary=1,h.Deprecated=2})(x=e.DiagnosticTag||(e.DiagnosticTag={}));var G;(function(h){function C(a){var l=a;return l!=null&&(T.number(l.value)||T.string(l.value))&&T.string(l.target)}h.is=C})(G=e.DiagnosticCode||(e.DiagnosticCode={}));var z;(function(h){function C(l,c,S,d,R,b){var k={range:l,message:c};return T.defined(S)&&(k.severity=S),T.defined(d)&&(k.code=d),T.defined(R)&&(k.source=R),T.defined(b)&&(k.relatedInformation=b),k}h.create=C;function a(l){var c=l;return T.defined(c)&&n.is(c.range)&&T.string(c.message)&&(T.number(c.severity)||T.undefined(c.severity))&&(T.number(c.code)||T.string(c.code)||T.undefined(c.code))&&(T.string(c.source)||T.undefined(c.source))&&(T.undefined(c.relatedInformation)||T.typedArray(c.relatedInformation,y.is))}h.is=a})(z=e.Diagnostic||(e.Diagnostic={}));var B;(function(h){function C(l,c){for(var S=[],d=2;d<arguments.length;d++)S[d-2]=arguments[d];var R={title:l,command:c};return T.defined(S)&&S.length>0&&(R.arguments=S),R}h.create=C;function a(l){var c=l;return T.defined(c)&&T.string(c.title)&&T.string(c.command)}h.is=a})(B=e.Command||(e.Command={}));var M;(function(h){function C(S,d){return{range:S,newText:d}}h.replace=C;function a(S,d){return{range:{start:S,end:S},newText:d}}h.insert=a;function l(S){return{range:S,newText:""}}h.del=l;function c(S){var d=S;return T.objectLiteral(d)&&T.string(d.newText)&&n.is(d.range)}h.is=c})(M=e.TextEdit||(e.TextEdit={}));var q;(function(h){function C(l,c){return{textDocument:l,edits:c}}h.create=C;function a(l){var c=l;return T.defined(c)&&rt.is(c.textDocument)&&Array.isArray(c.edits)}h.is=a})(q=e.TextDocumentEdit||(e.TextDocumentEdit={}));var j;(function(h){function C(l,c){var S={kind:"create",uri:l};return c!==void 0&&(c.overwrite!==void 0||c.ignoreIfExists!==void 0)&&(S.options=c),S}h.create=C;function a(l){var c=l;return c&&c.kind==="create"&&T.string(c.uri)&&(c.options===void 0||(c.options.overwrite===void 0||T.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||T.boolean(c.options.ignoreIfExists)))}h.is=a})(j=e.CreateFile||(e.CreateFile={}));var K;(function(h){function C(l,c,S){var d={kind:"rename",oldUri:l,newUri:c};return S!==void 0&&(S.overwrite!==void 0||S.ignoreIfExists!==void 0)&&(d.options=S),d}h.create=C;function a(l){var c=l;return c&&c.kind==="rename"&&T.string(c.oldUri)&&T.string(c.newUri)&&(c.options===void 0||(c.options.overwrite===void 0||T.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||T.boolean(c.options.ignoreIfExists)))}h.is=a})(K=e.RenameFile||(e.RenameFile={}));var Ce;(function(h){function C(l,c){var S={kind:"delete",uri:l};return c!==void 0&&(c.recursive!==void 0||c.ignoreIfNotExists!==void 0)&&(S.options=c),S}h.create=C;function a(l){var c=l;return c&&c.kind==="delete"&&T.string(c.uri)&&(c.options===void 0||(c.options.recursive===void 0||T.boolean(c.options.recursive))&&(c.options.ignoreIfNotExists===void 0||T.boolean(c.options.ignoreIfNotExists)))}h.is=a})(Ce=e.DeleteFile||(e.DeleteFile={}));var tt;(function(h){function C(a){var l=a;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(c){return T.string(c.kind)?j.is(c)||K.is(c)||Ce.is(c):q.is(c)}))}h.is=C})(tt=e.WorkspaceEdit||(e.WorkspaceEdit={}));var He=function(){function h(C){this.edits=C}return h.prototype.insert=function(C,a){this.edits.push(M.insert(C,a))},h.prototype.replace=function(C,a){this.edits.push(M.replace(C,a))},h.prototype.delete=function(C){this.edits.push(M.del(C))},h.prototype.add=function(C){this.edits.push(C)},h.prototype.all=function(){return this.edits},h.prototype.clear=function(){this.edits.splice(0,this.edits.length)},h}(),qe=function(){function h(C){var a=this;this._textEditChanges=Object.create(null),C&&(this._workspaceEdit=C,C.documentChanges?C.documentChanges.forEach(function(l){if(q.is(l)){var c=new He(l.edits);a._textEditChanges[l.textDocument.uri]=c}}):C.changes&&Object.keys(C.changes).forEach(function(l){var c=new He(C.changes[l]);a._textEditChanges[l]=c}))}return Object.defineProperty(h.prototype,"edit",{get:function(){return this._workspaceEdit===void 0?{documentChanges:[]}:this._workspaceEdit},enumerable:!0,configurable:!0}),h.prototype.getTextEditChange=function(C){if(rt.is(C)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var a=C,l=this._textEditChanges[a.uri];if(!l){var c=[],S={textDocument:a,edits:c};this._workspaceEdit.documentChanges.push(S),l=new He(c),this._textEditChanges[a.uri]=l}return l}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[C];if(!l){var c=[];this._workspaceEdit.changes[C]=c,l=new He(c),this._textEditChanges[C]=l}return l}},h.prototype.createFile=function(C,a){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(j.create(C,a))},h.prototype.renameFile=function(C,a,l){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(K.create(C,a,l))},h.prototype.deleteFile=function(C,a){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(Ce.create(C,a))},h.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},h}();e.WorkspaceChange=qe;var be;(function(h){function C(l){return{uri:l}}h.create=C;function a(l){var c=l;return T.defined(c)&&T.string(c.uri)}h.is=a})(be=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var rt;(function(h){function C(l,c){return{uri:l,version:c}}h.create=C;function a(l){var c=l;return T.defined(c)&&T.string(c.uri)&&(c.version===null||T.number(c.version))}h.is=a})(rt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var ve;(function(h){function C(l,c,S,d){return{uri:l,languageId:c,version:S,text:d}}h.create=C;function a(l){var c=l;return T.defined(c)&&T.string(c.uri)&&T.string(c.languageId)&&T.number(c.version)&&T.string(c.text)}h.is=a})(ve=e.TextDocumentItem||(e.TextDocumentItem={}));var We;(function(h){h.PlainText="plaintext",h.Markdown="markdown"})(We=e.MarkupKind||(e.MarkupKind={})),function(h){function C(a){var l=a;return l===h.PlainText||l===h.Markdown}h.is=C}(We=e.MarkupKind||(e.MarkupKind={}));var nt;(function(h){function C(a){var l=a;return T.objectLiteral(a)&&We.is(l.kind)&&T.string(l.value)}h.is=C})(nt=e.MarkupContent||(e.MarkupContent={}));var mt;(function(h){h.Text=1,h.Method=2,h.Function=3,h.Constructor=4,h.Field=5,h.Variable=6,h.Class=7,h.Interface=8,h.Module=9,h.Property=10,h.Unit=11,h.Value=12,h.Enum=13,h.Keyword=14,h.Snippet=15,h.Color=16,h.File=17,h.Reference=18,h.Folder=19,h.EnumMember=20,h.Constant=21,h.Struct=22,h.Event=23,h.Operator=24,h.TypeParameter=25})(mt=e.CompletionItemKind||(e.CompletionItemKind={}));var ze;(function(h){h.PlainText=1,h.Snippet=2})(ze=e.InsertTextFormat||(e.InsertTextFormat={}));var xt;(function(h){h.Deprecated=1})(xt=e.CompletionItemTag||(e.CompletionItemTag={}));var vt;(function(h){function C(l,c,S){return{newText:l,insert:c,replace:S}}h.create=C;function a(l){var c=l;return c&&T.string(c.newText)&&n.is(c.insert)&&n.is(c.replace)}h.is=a})(vt=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var st;(function(h){function C(a){return{label:a}}h.create=C})(st=e.CompletionItem||(e.CompletionItem={}));var Ie;(function(h){function C(a,l){return{items:a||[],isIncomplete:!!l}}h.create=C})(Ie=e.CompletionList||(e.CompletionList={}));var Xe;(function(h){function C(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}h.fromPlainText=C;function a(l){var c=l;return T.string(c)||T.objectLiteral(c)&&T.string(c.language)&&T.string(c.value)}h.is=a})(Xe=e.MarkedString||(e.MarkedString={}));var kt;(function(h){function C(a){var l=a;return!!l&&T.objectLiteral(l)&&(nt.is(l.contents)||Xe.is(l.contents)||T.typedArray(l.contents,Xe.is))&&(a.range===void 0||n.is(a.range))}h.is=C})(kt=e.Hover||(e.Hover={}));var yt;(function(h){function C(a,l){return l?{label:a,documentation:l}:{label:a}}h.create=C})(yt=e.ParameterInformation||(e.ParameterInformation={}));var ot;(function(h){function C(a,l){for(var c=[],S=2;S<arguments.length;S++)c[S-2]=arguments[S];var d={label:a};return T.defined(l)&&(d.documentation=l),T.defined(c)?d.parameters=c:d.parameters=[],d}h.create=C})(ot=e.SignatureInformation||(e.SignatureInformation={}));var qt;(function(h){h.Text=1,h.Read=2,h.Write=3})(qt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var at;(function(h){function C(a,l){var c={range:a};return T.number(l)&&(c.kind=l),c}h.create=C})(at=e.DocumentHighlight||(e.DocumentHighlight={}));var Ct;(function(h){h.File=1,h.Module=2,h.Namespace=3,h.Package=4,h.Class=5,h.Method=6,h.Property=7,h.Field=8,h.Constructor=9,h.Enum=10,h.Interface=11,h.Function=12,h.Variable=13,h.Constant=14,h.String=15,h.Number=16,h.Boolean=17,h.Array=18,h.Object=19,h.Key=20,h.Null=21,h.EnumMember=22,h.Struct=23,h.Event=24,h.Operator=25,h.TypeParameter=26})(Ct=e.SymbolKind||(e.SymbolKind={}));var _t;(function(h){h.Deprecated=1})(_t=e.SymbolTag||(e.SymbolTag={}));var ct;(function(h){function C(a,l,c,S,d){var R={name:a,kind:l,location:{uri:S,range:c}};return d&&(R.containerName=d),R}h.create=C})(ct=e.SymbolInformation||(e.SymbolInformation={}));var It;(function(h){function C(l,c,S,d,R,b){var k={name:l,detail:c,kind:S,range:d,selectionRange:R};return b!==void 0&&(k.children=b),k}h.create=C;function a(l){var c=l;return c&&T.string(c.name)&&T.number(c.kind)&&n.is(c.range)&&n.is(c.selectionRange)&&(c.detail===void 0||T.string(c.detail))&&(c.deprecated===void 0||T.boolean(c.deprecated))&&(c.children===void 0||Array.isArray(c.children))&&(c.tags===void 0||Array.isArray(c.tags))}h.is=a})(It=e.DocumentSymbol||(e.DocumentSymbol={}));var ut;(function(h){h.Empty="",h.QuickFix="quickfix",h.Refactor="refactor",h.RefactorExtract="refactor.extract",h.RefactorInline="refactor.inline",h.RefactorRewrite="refactor.rewrite",h.Source="source",h.SourceOrganizeImports="source.organizeImports",h.SourceFixAll="source.fixAll"})(ut=e.CodeActionKind||(e.CodeActionKind={}));var lt;(function(h){function C(l,c){var S={diagnostics:l};return c!=null&&(S.only=c),S}h.create=C;function a(l){var c=l;return T.defined(c)&&T.typedArray(c.diagnostics,z.is)&&(c.only===void 0||T.typedArray(c.only,T.string))}h.is=a})(lt=e.CodeActionContext||(e.CodeActionContext={}));var Ne;(function(h){function C(l,c,S){var d={title:l};return B.is(c)?d.command=c:d.edit=c,S!==void 0&&(d.kind=S),d}h.create=C;function a(l){var c=l;return c&&T.string(c.title)&&(c.diagnostics===void 0||T.typedArray(c.diagnostics,z.is))&&(c.kind===void 0||T.string(c.kind))&&(c.edit!==void 0||c.command!==void 0)&&(c.command===void 0||B.is(c.command))&&(c.isPreferred===void 0||T.boolean(c.isPreferred))&&(c.edit===void 0||tt.is(c.edit))}h.is=a})(Ne=e.CodeAction||(e.CodeAction={}));var Nt;(function(h){function C(l,c){var S={range:l};return T.defined(c)&&(S.data=c),S}h.create=C;function a(l){var c=l;return T.defined(c)&&n.is(c.range)&&(T.undefined(c.command)||B.is(c.command))}h.is=a})(Nt=e.CodeLens||(e.CodeLens={}));var Oe;(function(h){function C(l,c){return{tabSize:l,insertSpaces:c}}h.create=C;function a(l){var c=l;return T.defined(c)&&T.number(c.tabSize)&&T.boolean(c.insertSpaces)}h.is=a})(Oe=e.FormattingOptions||(e.FormattingOptions={}));var Je;(function(h){function C(l,c,S){return{range:l,target:c,data:S}}h.create=C;function a(l){var c=l;return T.defined(c)&&n.is(c.range)&&(T.undefined(c.target)||T.string(c.target))}h.is=a})(Je=e.DocumentLink||(e.DocumentLink={}));var Ke;(function(h){function C(l,c){return{range:l,parent:c}}h.create=C;function a(l){var c=l;return c!==void 0&&n.is(c.range)&&(c.parent===void 0||h.is(c.parent))}h.is=a})(Ke=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var Ve;(function(h){function C(S,d,R,b){return new Rt(S,d,R,b)}h.create=C;function a(S){var d=S;return!!(T.defined(d)&&T.string(d.uri)&&(T.undefined(d.languageId)||T.string(d.languageId))&&T.number(d.lineCount)&&T.func(d.getText)&&T.func(d.positionAt)&&T.func(d.offsetAt))}h.is=a;function l(S,d){for(var R=S.getText(),b=c(d,function(v,O){var F=v.range.start.line-O.range.start.line;return F===0?v.range.start.character-O.range.start.character:F}),k=R.length,N=b.length-1;N>=0;N--){var Z=b[N],se=S.offsetAt(Z.range.start),s=S.offsetAt(Z.range.end);if(s<=k)R=R.substring(0,se)+Z.newText+R.substring(s,R.length);else throw new Error("Overlapping edit");k=se}return R}h.applyEdits=l;function c(S,d){if(S.length<=1)return S;var R=S.length/2|0,b=S.slice(0,R),k=S.slice(R);c(b,d),c(k,d);for(var N=0,Z=0,se=0;N<b.length&&Z<k.length;){var s=d(b[N],k[Z]);s<=0?S[se++]=b[N++]:S[se++]=k[Z++]}for(;N<b.length;)S[se++]=b[N++];for(;Z<k.length;)S[se++]=k[Z++];return S}})(Ve=e.TextDocument||(e.TextDocument={}));var Rt=function(){function h(C,a,l,c){this._uri=C,this._languageId=a,this._version=l,this._content=c,this._lineOffsets=void 0}return Object.defineProperty(h.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),h.prototype.getText=function(C){if(C){var a=this.offsetAt(C.start),l=this.offsetAt(C.end);return this._content.substring(a,l)}return this._content},h.prototype.update=function(C,a){this._content=C.text,this._version=a,this._lineOffsets=void 0},h.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var C=[],a=this._content,l=!0,c=0;c<a.length;c++){l&&(C.push(c),l=!1);var S=a.charAt(c);l=S==="\r"||S===`
`,S==="\r"&&c+1<a.length&&a.charAt(c+1)===`
`&&c++}l&&a.length>0&&C.push(a.length),this._lineOffsets=C}return this._lineOffsets},h.prototype.positionAt=function(C){C=Math.max(Math.min(C,this._content.length),0);var a=this.getLineOffsets(),l=0,c=a.length;if(c===0)return r.create(0,C);for(;l<c;){var S=Math.floor((l+c)/2);a[S]>C?c=S:l=S+1}var d=l-1;return r.create(d,C-a[d])},h.prototype.offsetAt=function(C){var a=this.getLineOffsets();if(C.line>=a.length)return this._content.length;if(C.line<0)return 0;var l=a[C.line],c=C.line+1<a.length?a[C.line+1]:this._content.length;return Math.max(Math.min(l+C.character,c),l)},Object.defineProperty(h.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),h}(),T;(function(h){var C=Object.prototype.toString;function a(N){return typeof N<"u"}h.defined=a;function l(N){return typeof N>"u"}h.undefined=l;function c(N){return N===!0||N===!1}h.boolean=c;function S(N){return C.call(N)==="[object String]"}h.string=S;function d(N){return C.call(N)==="[object Number]"}h.number=d;function R(N){return C.call(N)==="[object Function]"}h.func=R;function b(N){return N!==null&&typeof N=="object"}h.objectLiteral=b;function k(N,Z){return Array.isArray(N)&&N.every(Z)}h.typedArray=k})(T||(T={}))})});var Fe=L(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});var sr=Me(),bi=class extends sr.RequestType0{constructor(e){super(e)}};or.ProtocolRequestType0=bi;var Oi=class extends sr.RequestType{constructor(e){super(e,sr.ParameterStructures.byName)}};or.ProtocolRequestType=Oi;var xi=class extends sr.NotificationType{constructor(e){super(e,sr.ParameterStructures.byName)}};or.ProtocolNotificationType=xi;var ki=class extends sr.NotificationType0{constructor(e){super(e)}};or.ProtocolNotificationType0=ki});var ia=L(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});function Xu(t){return t===!0||t===!1}Ze.boolean=Xu;function ra(t){return typeof t=="string"||t instanceof String}Ze.string=ra;function Ju(t){return typeof t=="number"||t instanceof Number}Ze.number=Ju;function Vu(t){return t instanceof Error}Ze.error=Vu;function Qu(t){return typeof t=="function"}Ze.func=Qu;function na(t){return Array.isArray(t)}Ze.array=na;function Yu(t){return na(t)&&t.every(e=>ra(e))}Ze.stringArray=Yu;function Zu(t,e){return Array.isArray(t)&&t.every(e)}Ze.typedArray=Zu;function el(t){return t!==null&&typeof t=="object"}Ze.objectLiteral=el});var sa=L(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var tl=Me(),rl=Fe(),nl;(function(t){t.method="textDocument/implementation",t.type=new rl.ProtocolRequestType(t.method),t.resultType=new tl.ProgressType})(nl=Vr.ImplementationRequest||(Vr.ImplementationRequest={}))});var oa=L(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var il=Me(),sl=Fe(),ol;(function(t){t.method="textDocument/typeDefinition",t.type=new sl.ProtocolRequestType(t.method),t.resultType=new il.ProgressType})(ol=Qr.TypeDefinitionRequest||(Qr.TypeDefinitionRequest={}))});var ca=L(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});var aa=Fe(),al;(function(t){t.type=new aa.ProtocolRequestType0("workspace/workspaceFolders")})(al=ar.WorkspaceFoldersRequest||(ar.WorkspaceFoldersRequest={}));var cl;(function(t){t.type=new aa.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(cl=ar.DidChangeWorkspaceFoldersNotification||(ar.DidChangeWorkspaceFoldersNotification={}))});var ua=L(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var ul=Fe(),ll;(function(t){t.type=new ul.ProtocolRequestType("workspace/configuration")})(ll=Yr.ConfigurationRequest||(Yr.ConfigurationRequest={}))});var da=L(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var dl=Me(),la=Fe(),fl;(function(t){t.method="textDocument/documentColor",t.type=new la.ProtocolRequestType(t.method),t.resultType=new dl.ProgressType})(fl=cr.DocumentColorRequest||(cr.DocumentColorRequest={}));var hl;(function(t){t.type=new la.ProtocolRequestType("textDocument/colorPresentation")})(hl=cr.ColorPresentationRequest||(cr.ColorPresentationRequest={}))});var fa=L(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});var pl=Me(),gl=Fe(),ml;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ml=ur.FoldingRangeKind||(ur.FoldingRangeKind={}));var vl;(function(t){t.method="textDocument/foldingRange",t.type=new gl.ProtocolRequestType(t.method),t.resultType=new pl.ProgressType})(vl=ur.FoldingRangeRequest||(ur.FoldingRangeRequest={}))});var ha=L(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var yl=Me(),Cl=Fe(),_l;(function(t){t.method="textDocument/declaration",t.type=new Cl.ProtocolRequestType(t.method),t.resultType=new yl.ProgressType})(_l=Zr.DeclarationRequest||(Zr.DeclarationRequest={}))});var pa=L(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var Rl=Me(),wl=Fe(),Tl;(function(t){t.method="textDocument/selectionRange",t.type=new wl.ProtocolRequestType(t.method),t.resultType=new Rl.ProgressType})(Tl=en.SelectionRangeRequest||(en.SelectionRangeRequest={}))});var ma=L(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});var Sl=Me(),ga=Fe(),El;(function(t){t.type=new Sl.ProgressType})(El=Et.WorkDoneProgress||(Et.WorkDoneProgress={}));var Pl;(function(t){t.type=new ga.ProtocolRequestType("window/workDoneProgress/create")})(Pl=Et.WorkDoneProgressCreateRequest||(Et.WorkDoneProgressCreateRequest={}));var Dl;(function(t){t.type=new ga.ProtocolNotificationType("window/workDoneProgress/cancel")})(Dl=Et.WorkDoneProgressCancelNotification||(Et.WorkDoneProgressCancelNotification={}))});var va=L(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});var qi=Fe(),bl;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new qi.ProtocolRequestType(t.method)})(bl=Pt.CallHierarchyPrepareRequest||(Pt.CallHierarchyPrepareRequest={}));var Ol;(function(t){t.method="callHierarchy/incomingCalls",t.type=new qi.ProtocolRequestType(t.method)})(Ol=Pt.CallHierarchyIncomingCallsRequest||(Pt.CallHierarchyIncomingCallsRequest={}));var xl;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new qi.ProtocolRequestType(t.method)})(xl=Pt.CallHierarchyOutgoingCallsRequest||(Pt.CallHierarchyOutgoingCallsRequest={}))});var wa=L(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var Dt=ia(),pt=Me(),J=Fe(),kl=sa();E.ImplementationRequest=kl.ImplementationRequest;var ql=oa();E.TypeDefinitionRequest=ql.TypeDefinitionRequest;var ya=ca();E.WorkspaceFoldersRequest=ya.WorkspaceFoldersRequest;E.DidChangeWorkspaceFoldersNotification=ya.DidChangeWorkspaceFoldersNotification;var Il=ua();E.ConfigurationRequest=Il.ConfigurationRequest;var Ca=da();E.DocumentColorRequest=Ca.DocumentColorRequest;E.ColorPresentationRequest=Ca.ColorPresentationRequest;var Nl=fa();E.FoldingRangeRequest=Nl.FoldingRangeRequest;var Ll=ha();E.DeclarationRequest=Ll.DeclarationRequest;var Fl=pa();E.SelectionRangeRequest=Fl.SelectionRangeRequest;var Ii=ma();E.WorkDoneProgress=Ii.WorkDoneProgress;E.WorkDoneProgressCreateRequest=Ii.WorkDoneProgressCreateRequest;E.WorkDoneProgressCancelNotification=Ii.WorkDoneProgressCancelNotification;var Ni=va();E.CallHierarchyIncomingCallsRequest=Ni.CallHierarchyIncomingCallsRequest;E.CallHierarchyOutgoingCallsRequest=Ni.CallHierarchyOutgoingCallsRequest;E.CallHierarchyPrepareRequest=Ni.CallHierarchyPrepareRequest;var _a;(function(t){function e(r){let n=r;return Dt.string(n.language)||Dt.string(n.scheme)||Dt.string(n.pattern)}t.is=e})(_a=E.DocumentFilter||(E.DocumentFilter={}));var Ra;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Dt.string(n)&&!_a.is(n))return!1;return!0}t.is=e})(Ra=E.DocumentSelector||(E.DocumentSelector={}));var Al;(function(t){t.type=new J.ProtocolRequestType("client/registerCapability")})(Al=E.RegistrationRequest||(E.RegistrationRequest={}));var Ml;(function(t){t.type=new J.ProtocolRequestType("client/unregisterCapability")})(Ml=E.UnregistrationRequest||(E.UnregistrationRequest={}));var jl;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(jl=E.ResourceOperationKind||(E.ResourceOperationKind={}));var Hl;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Hl=E.FailureHandlingKind||(E.FailureHandlingKind={}));var Wl;(function(t){function e(r){let n=r;return n&&Dt.string(n.id)&&n.id.length>0}t.hasId=e})(Wl=E.StaticRegistrationOptions||(E.StaticRegistrationOptions={}));var zl;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Ra.is(n.documentSelector))}t.is=e})(zl=E.TextDocumentRegistrationOptions||(E.TextDocumentRegistrationOptions={}));var Kl;(function(t){function e(n){let i=n;return Dt.objectLiteral(i)&&(i.workDoneProgress===void 0||Dt.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&Dt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(Kl=E.WorkDoneProgressOptions||(E.WorkDoneProgressOptions={}));var $l;(function(t){t.type=new J.ProtocolRequestType("initialize")})($l=E.InitializeRequest||(E.InitializeRequest={}));var Ul;(function(t){t.unknownProtocolVersion=1})(Ul=E.InitializeError||(E.InitializeError={}));var Gl;(function(t){t.type=new J.ProtocolNotificationType("initialized")})(Gl=E.InitializedNotification||(E.InitializedNotification={}));var Bl;(function(t){t.type=new J.ProtocolRequestType0("shutdown")})(Bl=E.ShutdownRequest||(E.ShutdownRequest={}));var Xl;(function(t){t.type=new J.ProtocolNotificationType0("exit")})(Xl=E.ExitNotification||(E.ExitNotification={}));var Jl;(function(t){t.type=new J.ProtocolNotificationType("workspace/didChangeConfiguration")})(Jl=E.DidChangeConfigurationNotification||(E.DidChangeConfigurationNotification={}));var Vl;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Vl=E.MessageType||(E.MessageType={}));var Ql;(function(t){t.type=new J.ProtocolNotificationType("window/showMessage")})(Ql=E.ShowMessageNotification||(E.ShowMessageNotification={}));var Yl;(function(t){t.type=new J.ProtocolRequestType("window/showMessageRequest")})(Yl=E.ShowMessageRequest||(E.ShowMessageRequest={}));var Zl;(function(t){t.type=new J.ProtocolNotificationType("window/logMessage")})(Zl=E.LogMessageNotification||(E.LogMessageNotification={}));var ed;(function(t){t.type=new J.ProtocolNotificationType("telemetry/event")})(ed=E.TelemetryEventNotification||(E.TelemetryEventNotification={}));var td;(function(t){t.None=0,t.Full=1,t.Incremental=2})(td=E.TextDocumentSyncKind||(E.TextDocumentSyncKind={}));var rd;(function(t){t.method="textDocument/didOpen",t.type=new J.ProtocolNotificationType(t.method)})(rd=E.DidOpenTextDocumentNotification||(E.DidOpenTextDocumentNotification={}));var nd;(function(t){t.method="textDocument/didChange",t.type=new J.ProtocolNotificationType(t.method)})(nd=E.DidChangeTextDocumentNotification||(E.DidChangeTextDocumentNotification={}));var id;(function(t){t.method="textDocument/didClose",t.type=new J.ProtocolNotificationType(t.method)})(id=E.DidCloseTextDocumentNotification||(E.DidCloseTextDocumentNotification={}));var sd;(function(t){t.method="textDocument/didSave",t.type=new J.ProtocolNotificationType(t.method)})(sd=E.DidSaveTextDocumentNotification||(E.DidSaveTextDocumentNotification={}));var od;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(od=E.TextDocumentSaveReason||(E.TextDocumentSaveReason={}));var ad;(function(t){t.method="textDocument/willSave",t.type=new J.ProtocolNotificationType(t.method)})(ad=E.WillSaveTextDocumentNotification||(E.WillSaveTextDocumentNotification={}));var cd;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new J.ProtocolRequestType(t.method)})(cd=E.WillSaveTextDocumentWaitUntilRequest||(E.WillSaveTextDocumentWaitUntilRequest={}));var ud;(function(t){t.type=new J.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(ud=E.DidChangeWatchedFilesNotification||(E.DidChangeWatchedFilesNotification={}));var ld;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(ld=E.FileChangeType||(E.FileChangeType={}));var dd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(dd=E.WatchKind||(E.WatchKind={}));var fd;(function(t){t.type=new J.ProtocolNotificationType("textDocument/publishDiagnostics")})(fd=E.PublishDiagnosticsNotification||(E.PublishDiagnosticsNotification={}));var hd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(hd=E.CompletionTriggerKind||(E.CompletionTriggerKind={}));var pd;(function(t){t.method="textDocument/completion",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(pd=E.CompletionRequest||(E.CompletionRequest={}));var gd;(function(t){t.method="completionItem/resolve",t.type=new J.ProtocolRequestType(t.method)})(gd=E.CompletionResolveRequest||(E.CompletionResolveRequest={}));var md;(function(t){t.method="textDocument/hover",t.type=new J.ProtocolRequestType(t.method)})(md=E.HoverRequest||(E.HoverRequest={}));var vd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(vd=E.SignatureHelpTriggerKind||(E.SignatureHelpTriggerKind={}));var yd;(function(t){t.method="textDocument/signatureHelp",t.type=new J.ProtocolRequestType(t.method)})(yd=E.SignatureHelpRequest||(E.SignatureHelpRequest={}));var Cd;(function(t){t.method="textDocument/definition",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(Cd=E.DefinitionRequest||(E.DefinitionRequest={}));var _d;(function(t){t.method="textDocument/references",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(_d=E.ReferencesRequest||(E.ReferencesRequest={}));var Rd;(function(t){t.method="textDocument/documentHighlight",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(Rd=E.DocumentHighlightRequest||(E.DocumentHighlightRequest={}));var wd;(function(t){t.method="textDocument/documentSymbol",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(wd=E.DocumentSymbolRequest||(E.DocumentSymbolRequest={}));var Td;(function(t){t.method="textDocument/codeAction",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(Td=E.CodeActionRequest||(E.CodeActionRequest={}));var Sd;(function(t){t.method="workspace/symbol",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(Sd=E.WorkspaceSymbolRequest||(E.WorkspaceSymbolRequest={}));var Ed;(function(t){t.type=new J.ProtocolRequestType("textDocument/codeLens"),t.resultType=new pt.ProgressType})(Ed=E.CodeLensRequest||(E.CodeLensRequest={}));var Pd;(function(t){t.type=new J.ProtocolRequestType("codeLens/resolve")})(Pd=E.CodeLensResolveRequest||(E.CodeLensResolveRequest={}));var Dd;(function(t){t.method="textDocument/documentLink",t.type=new J.ProtocolRequestType(t.method),t.resultType=new pt.ProgressType})(Dd=E.DocumentLinkRequest||(E.DocumentLinkRequest={}));var bd;(function(t){t.type=new J.ProtocolRequestType("documentLink/resolve")})(bd=E.DocumentLinkResolveRequest||(E.DocumentLinkResolveRequest={}));var Od;(function(t){t.method="textDocument/formatting",t.type=new J.ProtocolRequestType(t.method)})(Od=E.DocumentFormattingRequest||(E.DocumentFormattingRequest={}));var xd;(function(t){t.method="textDocument/rangeFormatting",t.type=new J.ProtocolRequestType(t.method)})(xd=E.DocumentRangeFormattingRequest||(E.DocumentRangeFormattingRequest={}));var kd;(function(t){t.method="textDocument/onTypeFormatting",t.type=new J.ProtocolRequestType(t.method)})(kd=E.DocumentOnTypeFormattingRequest||(E.DocumentOnTypeFormattingRequest={}));var qd;(function(t){t.method="textDocument/rename",t.type=new J.ProtocolRequestType(t.method)})(qd=E.RenameRequest||(E.RenameRequest={}));var Id;(function(t){t.method="textDocument/prepareRename",t.type=new J.ProtocolRequestType(t.method)})(Id=E.PrepareRenameRequest||(E.PrepareRenameRequest={}));var Nd;(function(t){t.type=new J.ProtocolRequestType("workspace/executeCommand")})(Nd=E.ExecuteCommandRequest||(E.ExecuteCommandRequest={}));var Ld;(function(t){t.type=new J.ProtocolRequestType("workspace/applyEdit")})(Ld=E.ApplyWorkspaceEditRequest||(E.ApplyWorkspaceEditRequest={}))});var Sa=L(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Ta=Me();function Fd(t,e,r,n){return Ta.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Ta.createMessageConnection(t,e,r,n)}Li.createProtocolConnection=Fd});var Ai=L(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});var Fi=Fe(),Ad;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.member="member",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Ad=De.SemanticTokenTypes||(De.SemanticTokenTypes={}));var Md;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Md=De.SemanticTokenModifiers||(De.SemanticTokenModifiers={}));var jd;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(jd=De.SemanticTokens||(De.SemanticTokens={}));var Hd;(function(t){t.Relative="relative"})(Hd=De.TokenFormat||(De.TokenFormat={}));var Wd;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Fi.ProtocolRequestType(t.method)})(Wd=De.SemanticTokensRequest||(De.SemanticTokensRequest={}));var zd;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Fi.ProtocolRequestType(t.method)})(zd=De.SemanticTokensDeltaRequest||(De.SemanticTokensDeltaRequest={}));var Kd;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Fi.ProtocolRequestType(t.method)})(Kd=De.SemanticTokensRangeRequest||(De.SemanticTokensRangeRequest={}))});var Ea=L(zt=>{"use strict";function tn(t){for(var e in t)zt.hasOwnProperty(e)||(zt[e]=t[e])}Object.defineProperty(zt,"__esModule",{value:!0});tn(Me());tn(ta());tn(Fe());tn(wa());var $d=Sa();zt.createProtocolConnection=$d.createProtocolConnection;var gt=Ai(),Ud;(function(t){t.SemanticTokenTypes=gt.SemanticTokenTypes,t.SemanticTokenModifiers=gt.SemanticTokenModifiers,t.SemanticTokens=gt.SemanticTokens;let e;(function(i){i.method=gt.SemanticTokensRequest.method,i.type=gt.SemanticTokensRequest.type})(e=t.SemanticTokensRequest||(t.SemanticTokensRequest={}));let r;(function(i){i.method=gt.SemanticTokensDeltaRequest.method,i.type=gt.SemanticTokensDeltaRequest.type})(r=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={}));let n;(function(i){i.method=gt.SemanticTokensRangeRequest.method,i.type=gt.SemanticTokensRangeRequest.type})(n=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))})(Ud=zt.Proposed||(zt.Proposed={}))});var ye=L(Tr=>{"use strict";function Pa(t){for(var e in t)Tr.hasOwnProperty(e)||(Tr[e]=t[e])}Object.defineProperty(Tr,"__esModule",{value:!0});var Gd=Xr();Pa(Xr());Pa(Ea());function Bd(t,e,r,n){return Gd.createMessageConnection(t,e,r,n)}Tr.createProtocolConnection=Bd});var Hi=L(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var Mi=require("vscode"),Xd=ye(),ji=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Xd.ConfigurationRequest.type,(r,n)=>{let i=u=>{let p=[];for(let f of u.items){let m=f.scopeUri!==void 0&&f.scopeUri!==null?this._client.protocol2CodeConverter.asUri(f.scopeUri):void 0;p.push(this.getConfiguration(m,f.section!==null?f.section:void 0))}return p},o=e.clientOptions.middleware.workspace;return o&&o.configuration?o.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=lr(Mi.workspace.getConfiguration(void 0,e).get(r));else{let o=Mi.workspace.getConfiguration(r.substr(0,i),e);o&&(n=lr(o.get(r.substr(i+1))))}}else{let i=Mi.workspace.getConfiguration(void 0,e);n={};for(let o of Object.keys(i))i.has(o)&&(n[o]=lr(i.get(o)))}return n===void 0&&(n=null),n}};rn.ConfigurationFeature=ji;function lr(t){if(t){if(Array.isArray(t))return t.map(lr);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=lr(t[r]));return e}}return t}rn.toJSONObject=lr});var Ki=L(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var Jd=require("vscode"),Wi=class extends Jd.CompletionItem{constructor(e){super(e)}};zi.default=Wi});var Gi=L(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var Vd=require("vscode"),$i=class extends Vd.CodeLens{constructor(e){super(e)}};Ui.default=$i});var Ji=L(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var Qd=require("vscode"),Bi=class extends Qd.DocumentLink{constructor(e,r){super(e,r)}};Xi.default=Bi});var Da=L(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var we=require("vscode"),oe=ye(),Sr=Qt(),Yd=Ki(),Zd=Gi(),ef=Ji(),Vi;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(Vi||(Vi={}));function tf(t){let r=t||(a=>a.toString());function n(a){return r(a)}function i(a){return{uri:r(a.uri)}}function o(a){return{uri:r(a.uri),version:a.version}}function u(a){return{textDocument:{uri:r(a.uri),languageId:a.languageId,version:a.version,text:a.getText()}}}function p(a){let l=a;return!!l.document&&!!l.contentChanges}function f(a){let l=a;return!!l.uri&&!!l.version}function m(a){if(f(a))return{textDocument:{uri:r(a.uri),version:a.version},contentChanges:[{text:a.getText()}]};if(p(a)){let l=a.document;return{textDocument:{uri:r(l.uri),version:l.version},contentChanges:a.contentChanges.map(S=>{let d=S.range;return{range:{start:{line:d.start.line,character:d.start.character},end:{line:d.end.line,character:d.end.character}},rangeLength:S.rangeLength,text:S.text}})}}else throw Error("Unsupported text document change parameter")}function _(a){return{textDocument:i(a)}}function y(a,l=!1){let c={textDocument:o(a)};return l&&(c.text=a.getText()),c}function P(a){switch(a){case we.TextDocumentSaveReason.Manual:return oe.TextDocumentSaveReason.Manual;case we.TextDocumentSaveReason.AfterDelay:return oe.TextDocumentSaveReason.AfterDelay;case we.TextDocumentSaveReason.FocusOut:return oe.TextDocumentSaveReason.FocusOut}return oe.TextDocumentSaveReason.Manual}function x(a){return{textDocument:i(a.document),reason:P(a.reason)}}function G(a,l){return{textDocument:i(a),position:qe(l)}}function z(a){switch(a){case we.CompletionTriggerKind.TriggerCharacter:return oe.CompletionTriggerKind.TriggerCharacter;case we.CompletionTriggerKind.TriggerForIncompleteCompletions:return oe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return oe.CompletionTriggerKind.Invoked}}function B(a,l,c){return{textDocument:i(a),position:qe(l),context:{triggerKind:z(c.triggerKind),triggerCharacter:c.triggerCharacter}}}function M(a){switch(a){case we.SignatureHelpTriggerKind.Invoke:return oe.SignatureHelpTriggerKind.Invoked;case we.SignatureHelpTriggerKind.TriggerCharacter:return oe.SignatureHelpTriggerKind.TriggerCharacter;case we.SignatureHelpTriggerKind.ContentChange:return oe.SignatureHelpTriggerKind.ContentChange}}function q(a){return{label:a.label}}function j(a){return a.map(q)}function K(a){return{label:a.label,parameters:j(a.parameters)}}function Ce(a){return a.map(K)}function tt(a){return a===void 0?a:{signatures:Ce(a.signatures),activeSignature:a.activeSignature,activeParameter:a.activeParameter}}function He(a,l,c){return{textDocument:i(a),position:qe(l),context:{isRetrigger:c.isRetrigger,triggerCharacter:c.triggerCharacter,triggerKind:M(c.triggerKind),activeSignatureHelp:tt(c.activeSignatureHelp)}}}function qe(a){return{line:a.line,character:a.character}}function be(a){return a==null?a:{line:a.line,character:a.character}}function rt(a){let l=[];for(let c of a)l.push(be(c));return l}function ve(a){return a==null?a:{start:be(a.start),end:be(a.end)}}function We(a){return a==null?a:oe.Location.create(n(a.uri),ve(a.range))}function nt(a){switch(a){case we.DiagnosticSeverity.Error:return oe.DiagnosticSeverity.Error;case we.DiagnosticSeverity.Warning:return oe.DiagnosticSeverity.Warning;case we.DiagnosticSeverity.Information:return oe.DiagnosticSeverity.Information;case we.DiagnosticSeverity.Hint:return oe.DiagnosticSeverity.Hint}}function mt(a){if(!a)return;let l=[];for(let c of a){let S=ze(c);S!==void 0&&l.push(S)}return l.length>0?l:void 0}function ze(a){switch(a){case we.DiagnosticTag.Unnecessary:return oe.DiagnosticTag.Unnecessary;case we.DiagnosticTag.Deprecated:return oe.DiagnosticTag.Deprecated;default:return}}function xt(a){return{message:a.message,location:We(a.location)}}function vt(a){return a.map(xt)}function st(a){if(a!=null)return Sr.number(a)||Sr.string(a)?a:{value:a.value,target:n(a.target)}}function Ie(a){let l=oe.Diagnostic.create(ve(a.range),a.message);return Sr.number(a.severity)&&(l.severity=nt(a.severity)),l.code=st(a.code),Array.isArray(a.tags)&&(l.tags=mt(a.tags)),a.relatedInformation&&(l.relatedInformation=vt(a.relatedInformation)),a.source&&(l.source=a.source),l}function Xe(a){return a==null?a:a.map(Ie)}function kt(a,l){switch(a){case"$string":return l;case oe.MarkupKind.PlainText:return{kind:a,value:l};case oe.MarkupKind.Markdown:return{kind:a,value:l.value};default:return`Unsupported Markup content received. Kind is: ${a}`}}function yt(a){switch(a){case we.CompletionItemTag.Deprecated:return oe.CompletionItemTag.Deprecated}}function ot(a){if(a===void 0)return a;let l=[];for(let c of a){let S=yt(c);S!==void 0&&l.push(S)}return l}function qt(a,l){return l!==void 0?l:a+1}function at(a){let l={label:a.label},c=a instanceof Yd.default?a:void 0;a.detail&&(l.detail=a.detail),a.documentation&&(!c||c.documentationFormat==="$string"?l.documentation=a.documentation:l.documentation=kt(c.documentationFormat,a.documentation)),a.filterText&&(l.filterText=a.filterText),Ct(l,a),Sr.number(a.kind)&&(l.kind=qt(a.kind,c&&c.originalItemKind)),a.sortText&&(l.sortText=a.sortText),a.additionalTextEdits&&(l.additionalTextEdits=It(a.additionalTextEdits)),a.commitCharacters&&(l.commitCharacters=a.commitCharacters.slice()),a.command&&(l.command=Je(a.command)),(a.preselect===!0||a.preselect===!1)&&(l.preselect=a.preselect);let S=ot(a.tags);if(c&&(c.data!==void 0&&(l.data=c.data),c.deprecated===!0||c.deprecated===!1)){if(c.deprecated===!0&&S!==void 0&&S.length>0){let d=S.indexOf(we.CompletionItemTag.Deprecated);d!==-1&&S.splice(d,1)}l.deprecated=c.deprecated}return S!==void 0&&S.length>0&&(l.tags=S),l}function Ct(a,l){let c=oe.InsertTextFormat.PlainText,S,d;l.textEdit?(S=l.textEdit.newText,d=l.textEdit.range):l.insertText instanceof we.SnippetString?(c=oe.InsertTextFormat.Snippet,S=l.insertText.value):S=l.insertText,l.range&&(d=l.range),a.insertTextFormat=c,l.fromEdit&&S!==void 0&&d!==void 0?a.textEdit=_t(S,d):a.insertText=S}function _t(a,l){return Vi.is(l)?oe.InsertReplaceEdit.create(a,ve(l.inserting),ve(l.replacing)):{newText:a,range:ve(l)}}function ct(a){return{range:ve(a.range),newText:a.newText}}function It(a){return a==null?a:a.map(ct)}function ut(a){return a<=we.SymbolKind.TypeParameter?a+1:oe.SymbolKind.Property}function lt(a){return a}function Ne(a){return a.map(lt)}function Nt(a,l,c){return{textDocument:i(a),position:qe(l),context:{includeDeclaration:c.includeDeclaration}}}function Oe(a){if(a==null)return a;let l;return a.only&&Sr.string(a.only.value)&&(l=[a.only.value]),oe.CodeActionContext.create(Xe(a.diagnostics),l)}function Je(a){let l=oe.Command.create(a.title,a.command);return a.arguments&&(l.arguments=a.arguments),l}function Ke(a){let l=oe.CodeLens.create(ve(a.range));return a.command&&(l.command=Je(a.command)),a instanceof Zd.default&&a.data&&(l.data=a.data),l}function Ve(a){return{tabSize:a.tabSize,insertSpaces:a.insertSpaces}}function Rt(a){return{textDocument:i(a)}}function T(a){return{textDocument:i(a)}}function h(a){let l=oe.DocumentLink.create(ve(a.range));a.target&&(l.target=n(a.target)),a.tooltip!==void 0&&(l.tooltip=a.tooltip);let c=a instanceof ef.default?a:void 0;return c&&c.data&&(l.data=c.data),l}function C(a){return{textDocument:i(a)}}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:u,asChangeTextDocumentParams:m,asCloseTextDocumentParams:_,asSaveTextDocumentParams:y,asWillSaveTextDocumentParams:x,asTextDocumentPositionParams:G,asCompletionParams:B,asSignatureHelpParams:He,asWorkerPosition:qe,asRange:ve,asPosition:be,asPositions:rt,asLocation:We,asDiagnosticSeverity:nt,asDiagnosticTag:ze,asDiagnostic:Ie,asDiagnostics:Xe,asCompletionItem:at,asTextEdit:ct,asSymbolKind:ut,asSymbolTag:lt,asSymbolTags:Ne,asReferenceParams:Nt,asCodeActionContext:Oe,asCommand:Je,asCodeLens:Ke,asFormattingOptions:Ve,asDocumentSymbolParams:Rt,asCodeLensParams:T,asDocumentLink:h,asDocumentLinkParams:C}}Qi.createConverter=tf});var ba=L(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var I=require("vscode"),Y=ye(),je=Qt(),rf=Ki(),nf=Gi(),sf=Ji(),nn;(function(t){function e(r){let n=r;return n&&je.string(n.language)&&je.string(n.value)}t.is=e})(nn||(nn={}));function of(t){let r=t||(s=>I.Uri.parse(s));function n(s){return r(s)}function i(s){return s.map(o)}function o(s){let v=new I.Diagnostic(y(s.range),s.message,x(s.severity));return(je.number(s.code)||je.string(s.code))&&(v.code=s.code),Y.DiagnosticCode.is(s.code)&&(v.code={value:s.code.value,target:n(s.code.target)}),s.source&&(v.source=s.source),s.relatedInformation&&(v.relatedInformation=u(s.relatedInformation)),Array.isArray(s.tags)&&(v.tags=f(s.tags)),v}function u(s){return s.map(p)}function p(s){return new I.DiagnosticRelatedInformation(ze(s.location),s.message)}function f(s){if(!s)return;let v=[];for(let O of s){let F=m(O);F!==void 0&&v.push(F)}return v.length>0?v:void 0}function m(s){switch(s){case Y.DiagnosticTag.Unnecessary:return I.DiagnosticTag.Unnecessary;case Y.DiagnosticTag.Deprecated:return I.DiagnosticTag.Deprecated;default:return}}function _(s){if(!!s)return new I.Position(s.line,s.character)}function y(s){if(!!s)return new I.Range(_(s.start),_(s.end))}function P(s){return s.map(v=>y(v))}function x(s){if(s==null)return I.DiagnosticSeverity.Error;switch(s){case Y.DiagnosticSeverity.Error:return I.DiagnosticSeverity.Error;case Y.DiagnosticSeverity.Warning:return I.DiagnosticSeverity.Warning;case Y.DiagnosticSeverity.Information:return I.DiagnosticSeverity.Information;case Y.DiagnosticSeverity.Hint:return I.DiagnosticSeverity.Hint}return I.DiagnosticSeverity.Error}function G(s){if(je.string(s))return new I.MarkdownString(s);if(nn.is(s))return new I.MarkdownString().appendCodeblock(s.value,s.language);if(Array.isArray(s)){let v=[];for(let O of s){let F=new I.MarkdownString;nn.is(O)?F.appendCodeblock(O.value,O.language):F.appendMarkdown(O),v.push(F)}return v}else{let v;switch(s.kind){case Y.MarkupKind.Markdown:return new I.MarkdownString(s.value);case Y.MarkupKind.PlainText:return v=new I.MarkdownString,v.appendText(s.value),v;default:return v=new I.MarkdownString,v.appendText(`Unsupported Markup content received. Kind is: ${s.kind}`),v}}}function z(s){if(je.string(s))return s;switch(s.kind){case Y.MarkupKind.Markdown:return new I.MarkdownString(s.value);case Y.MarkupKind.PlainText:return s.value;default:return`Unsupported Markup content received. Kind is: ${s.kind}`}}function B(s){if(!!s)return new I.Hover(G(s.contents),y(s.range))}function M(s){if(!s)return;if(Array.isArray(s))return s.map(Ce);let v=s;return new I.CompletionList(v.items.map(Ce),v.isIncomplete)}function q(s){return Y.CompletionItemKind.Text<=s&&s<=Y.CompletionItemKind.TypeParameter?[s-1,void 0]:[I.CompletionItemKind.Text,s]}function j(s){switch(s){case Y.CompletionItemTag.Deprecated:return I.CompletionItemTag.Deprecated}}function K(s){if(s==null)return[];let v=[];for(let O of s){let F=j(O);F!==void 0&&v.push(F)}return v}function Ce(s){let v=K(s.tags),O=new rf.default(s.label);s.detail&&(O.detail=s.detail),s.documentation&&(O.documentation=z(s.documentation),O.documentationFormat=je.string(s.documentation)?"$string":s.documentation.kind),s.filterText&&(O.filterText=s.filterText);let F=tt(s);if(F&&(O.insertText=F.text,O.range=F.range,O.fromEdit=F.fromEdit),je.number(s.kind)){let[he,Te]=q(s.kind);O.kind=he,Te&&(O.originalItemKind=Te)}return s.sortText&&(O.sortText=s.sortText),s.additionalTextEdits&&(O.additionalTextEdits=be(s.additionalTextEdits)),je.stringArray(s.commitCharacters)&&(O.commitCharacters=s.commitCharacters.slice()),s.command&&(O.command=Ne(s.command)),(s.deprecated===!0||s.deprecated===!1)&&(O.deprecated=s.deprecated,s.deprecated===!0&&v.push(I.CompletionItemTag.Deprecated)),(s.preselect===!0||s.preselect===!1)&&(O.preselect=s.preselect),s.data!==void 0&&(O.data=s.data),v.length>0&&(O.tags=v),O}function tt(s){return s.textEdit?s.insertTextFormat===Y.InsertTextFormat.Snippet?{text:new I.SnippetString(s.textEdit.newText),range:He(s.textEdit),fromEdit:!0}:{text:s.textEdit.newText,range:He(s.textEdit),fromEdit:!0}:s.insertText?s.insertTextFormat===Y.InsertTextFormat.Snippet?{text:new I.SnippetString(s.insertText),fromEdit:!1}:{text:s.insertText,fromEdit:!1}:void 0}function He(s){return Y.InsertReplaceEdit.is(s)?{inserting:y(s.insert),replacing:y(s.replace)}:y(s.range)}function qe(s){if(!!s)return new I.TextEdit(y(s.range),s.newText)}function be(s){if(!!s)return s.map(qe)}function rt(s){if(!s)return;let v=new I.SignatureHelp;return je.number(s.activeSignature)?v.activeSignature=s.activeSignature:v.activeSignature=0,je.number(s.activeParameter)?v.activeParameter=s.activeParameter:v.activeParameter=0,s.signatures&&(v.signatures=ve(s.signatures)),v}function ve(s){return s.map(We)}function We(s){let v=new I.SignatureInformation(s.label);return s.documentation!==void 0&&(v.documentation=z(s.documentation)),s.parameters!==void 0&&(v.parameters=nt(s.parameters)),s.activeParameter!==void 0&&(v.activeParameter=s.activeParameter),v}function nt(s){return s.map(mt)}function mt(s){let v=new I.ParameterInformation(s.label);return s.documentation&&(v.documentation=z(s.documentation)),v}function ze(s){if(!!s)return new I.Location(r(s.uri),y(s.range))}function xt(s){if(!!s)return Ie(s)}function vt(s){if(!!s)return Ie(s)}function st(s){if(!s)return;let v={targetUri:r(s.targetUri),targetRange:y(s.targetSelectionRange),originSelectionRange:y(s.originSelectionRange),targetSelectionRange:y(s.targetSelectionRange)};if(!v.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return v}function Ie(s){if(!!s)return je.array(s)?s.length===0?[]:Y.LocationLink.is(s[0])?s.map(O=>st(O)):s.map(O=>ze(O)):Y.LocationLink.is(s)?[st(s)]:ze(s)}function Xe(s){if(!!s)return s.map(v=>ze(v))}function kt(s){if(!!s)return s.map(yt)}function yt(s){let v=new I.DocumentHighlight(y(s.range));return je.number(s.kind)&&(v.kind=ot(s.kind)),v}function ot(s){switch(s){case Y.DocumentHighlightKind.Text:return I.DocumentHighlightKind.Text;case Y.DocumentHighlightKind.Read:return I.DocumentHighlightKind.Read;case Y.DocumentHighlightKind.Write:return I.DocumentHighlightKind.Write}return I.DocumentHighlightKind.Text}function qt(s,v){if(!!s)return s.map(O=>ct(O,v))}function at(s){return s<=Y.SymbolKind.TypeParameter?s-1:I.SymbolKind.Property}function Ct(s){switch(s){case Y.SymbolTag.Deprecated:return I.SymbolTag.Deprecated;default:return}}function _t(s){if(s==null)return;let v=[];for(let O of s){let F=Ct(O);F!==void 0&&v.push(F)}return v.length===0?void 0:v}function ct(s,v){let O=new I.SymbolInformation(s.name,at(s.kind),y(s.location.range),s.location.uri?r(s.location.uri):v);return lt(O,s),s.containerName&&(O.containerName=s.containerName),O}function It(s){if(s!=null)return s.map(ut)}function ut(s){let v=new I.DocumentSymbol(s.name,s.detail||"",at(s.kind),y(s.range),y(s.selectionRange));if(lt(v,s),s.children!==void 0&&s.children.length>0){let O=[];for(let F of s.children)O.push(ut(F));v.children=O}return v}function lt(s,v){s.tags=_t(v.tags),v.deprecated&&(s.tags?s.tags.includes(I.SymbolTag.Deprecated)||(s.tags=s.tags.concat(I.SymbolTag.Deprecated)):s.tags=[I.SymbolTag.Deprecated])}function Ne(s){let v={title:s.title,command:s.command};return s.arguments&&(v.arguments=s.arguments),v}function Nt(s){if(!!s)return s.map(Ne)}let Oe=new Map;Oe.set(Y.CodeActionKind.Empty,I.CodeActionKind.Empty),Oe.set(Y.CodeActionKind.QuickFix,I.CodeActionKind.QuickFix),Oe.set(Y.CodeActionKind.Refactor,I.CodeActionKind.Refactor),Oe.set(Y.CodeActionKind.RefactorExtract,I.CodeActionKind.RefactorExtract),Oe.set(Y.CodeActionKind.RefactorInline,I.CodeActionKind.RefactorInline),Oe.set(Y.CodeActionKind.RefactorRewrite,I.CodeActionKind.RefactorRewrite),Oe.set(Y.CodeActionKind.Source,I.CodeActionKind.Source),Oe.set(Y.CodeActionKind.SourceOrganizeImports,I.CodeActionKind.SourceOrganizeImports);function Je(s){if(s==null)return;let v=Oe.get(s);if(v)return v;let O=s.split(".");v=I.CodeActionKind.Empty;for(let F of O)v=v.append(F);return v}function Ke(s){if(s!=null)return s.map(v=>Je(v))}function Ve(s){if(s==null)return;let v=new I.CodeAction(s.title);return s.kind!==void 0&&(v.kind=Je(s.kind)),s.diagnostics&&(v.diagnostics=i(s.diagnostics)),s.edit&&(v.edit=h(s.edit)),s.command&&(v.command=Ne(s.command)),s.isPreferred!==void 0&&(v.isPreferred=s.isPreferred),v}function Rt(s){if(!s)return;let v=new nf.default(y(s.range));return s.command&&(v.command=Ne(s.command)),s.data!==void 0&&s.data!==null&&(v.data=s.data),v}function T(s){if(!!s)return s.map(v=>Rt(v))}function h(s){if(!s)return;let v=new I.WorkspaceEdit;return s.documentChanges?s.documentChanges.forEach(O=>{if(Y.CreateFile.is(O))v.createFile(r(O.uri),O.options);else if(Y.RenameFile.is(O))v.renameFile(r(O.oldUri),r(O.newUri),O.options);else if(Y.DeleteFile.is(O))v.deleteFile(r(O.uri),O.options);else if(Y.TextDocumentEdit.is(O))v.set(r(O.textDocument.uri),be(O.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(O,void 0,4)}`)}):s.changes&&Object.keys(s.changes).forEach(O=>{v.set(r(O),be(s.changes[O]))}),v}function C(s){let v=y(s.range),O=s.target?n(s.target):void 0,F=new sf.default(v,O);return s.tooltip!==void 0&&(F.tooltip=s.tooltip),s.data!==void 0&&s.data!==null&&(F.data=s.data),F}function a(s){if(!!s)return s.map(C)}function l(s){return new I.Color(s.red,s.green,s.blue,s.alpha)}function c(s){return new I.ColorInformation(y(s.range),l(s.color))}function S(s){if(Array.isArray(s))return s.map(c)}function d(s){let v=new I.ColorPresentation(s.label);return v.additionalTextEdits=be(s.additionalTextEdits),s.textEdit&&(v.textEdit=qe(s.textEdit)),v}function R(s){if(Array.isArray(s))return s.map(d)}function b(s){if(s)switch(s){case Y.FoldingRangeKind.Comment:return I.FoldingRangeKind.Comment;case Y.FoldingRangeKind.Imports:return I.FoldingRangeKind.Imports;case Y.FoldingRangeKind.Region:return I.FoldingRangeKind.Region}}function k(s){return new I.FoldingRange(s.startLine,s.endLine,b(s.kind))}function N(s){if(Array.isArray(s))return s.map(k)}function Z(s){return new I.SelectionRange(y(s.range),s.parent?Z(s.parent):void 0)}function se(s){if(!Array.isArray(s))return[];let v=[];for(let O of s)v.push(Z(O));return v}return{asUri:n,asDiagnostics:i,asDiagnostic:o,asRange:y,asRanges:P,asPosition:_,asDiagnosticSeverity:x,asDiagnosticTag:m,asHover:B,asCompletionResult:M,asCompletionItem:Ce,asTextEdit:qe,asTextEdits:be,asSignatureHelp:rt,asSignatureInformations:ve,asSignatureInformation:We,asParameterInformations:nt,asParameterInformation:mt,asDeclarationResult:xt,asDefinitionResult:vt,asLocation:ze,asReferences:Xe,asDocumentHighlights:kt,asDocumentHighlight:yt,asDocumentHighlightKind:ot,asSymbolKind:at,asSymbolTag:Ct,asSymbolTags:_t,asSymbolInformations:qt,asSymbolInformation:ct,asDocumentSymbols:It,asDocumentSymbol:ut,asCommand:Ne,asCommands:Nt,asCodeAction:Ve,asCodeActionKind:Je,asCodeActionKinds:Ke,asCodeLens:Rt,asCodeLenses:T,asWorkspaceEdit:h,asDocumentLink:C,asDocumentLinks:a,asFoldingRangeKind:b,asFoldingRange:k,asFoldingRanges:N,asColor:l,asColorInformation:c,asColorInformations:S,asColorPresentation:d,asColorPresentations:R,asSelectionRange:Z,asSelectionRanges:se}}Yi.createConverter=of});var xa=L(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var Oa=ye(),Zi=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=Oa.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Oa.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};es.Delayer=Zi});var ts=L(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});var Er=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},V=class extends Er{constructor(){super([V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),"-",V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),"-","4",V._randomHex(),V._randomHex(),V._randomHex(),"-",V._oneOf(V._timeHighBits),V._randomHex(),V._randomHex(),V._randomHex(),"-",V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex(),V._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V._oneOf(V._chars)}};V._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];V._timeHighBits=["8","9","a","b"];Kt.empty=new Er("00000000-0000-0000-0000-000000000000");function ka(){return new V}Kt.v4=ka;var af=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function qa(t){return af.test(t)}Kt.isUUID=qa;function cf(t){if(!qa(t))throw new Error("invalid uuid");return new Er(t)}Kt.parse=cf;function uf(){return ka().asHex()}Kt.generateUuid=uf});var ss=L(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});var rs=require("vscode"),Ia=ye(),Na=Qt(),ns=class{constructor(e,r){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Ia.WorkDoneProgress.type,this._token,n=>{switch(n.kind){case"begin":this.begin(n);break;case"report":this.report(n);break;case"end":this.done();break}})}begin(e){let r=e.cancellable?rs.ProgressLocation.Notification:rs.ProgressLocation.Window;rs.window.withProgress({location:r,cancellable:e.cancellable,title:e.title},async(n,i)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=i,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Ia.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((o,u)=>{this._resolve=o,this._reject=u})))}report(e){if(this._infinite&&Na.string(e.message))this._progress.report({message:e.message});else if(Na.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};is.ProgressPart=ns});var Ge=L(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});var A=require("vscode"),g=ye(),lf=Hi(),df=Da(),ff=ba(),ce=Qt(),La=xa(),ae=ts(),hf=ss(),os=class{error(e){g.RAL().console.error(e)}warn(e){g.RAL().console.warn(e)}info(e){g.RAL().console.info(e)}log(e){g.RAL().console.log(e)}};function pf(t,e,r,n,i){let o=new os,u=g.createProtocolConnection(t,e,o,i);return u.onError(f=>{r(f[0],f[1],f[2])}),u.onClose(n),{listen:()=>u.listen(),sendRequest:(f,...m)=>u.sendRequest(ce.string(f)?f:f.method,...m),onRequest:(f,m)=>u.onRequest(ce.string(f)?f:f.method,m),sendNotification:(f,m)=>u.sendNotification(ce.string(f)?f:f.method,m),onNotification:(f,m)=>u.onNotification(ce.string(f)?f:f.method,m),onProgress:u.onProgress,sendProgress:u.sendProgress,trace:(f,m,_)=>{let y={sendNotification:!1,traceFormat:g.TraceFormat.Text};_===void 0?u.trace(f,m,y):(ce.boolean(_),u.trace(f,m,_))},initialize:f=>u.sendRequest(g.InitializeRequest.type,f),shutdown:()=>u.sendRequest(g.ShutdownRequest.type,void 0),exit:()=>u.sendNotification(g.ExitNotification.type),onLogMessage:f=>u.onNotification(g.LogMessageNotification.type,f),onShowMessage:f=>u.onNotification(g.ShowMessageNotification.type,f),onTelemetry:f=>u.onNotification(g.TelemetryEventNotification.type,f),didChangeConfiguration:f=>u.sendNotification(g.DidChangeConfigurationNotification.type,f),didChangeWatchedFiles:f=>u.sendNotification(g.DidChangeWatchedFilesNotification.type,f),didOpenTextDocument:f=>u.sendNotification(g.DidOpenTextDocumentNotification.type,f),didChangeTextDocument:f=>u.sendNotification(g.DidChangeTextDocumentNotification.type,f),didCloseTextDocument:f=>u.sendNotification(g.DidCloseTextDocumentNotification.type,f),didSaveTextDocument:f=>u.sendNotification(g.DidSaveTextDocumentNotification.type,f),onDiagnostics:f=>u.onNotification(g.PublishDiagnosticsNotification.type,f),dispose:()=>u.dispose()}}var on;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(on=Ae.ErrorAction||(Ae.ErrorAction={}));var $t;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})($t=Ae.CloseAction||(Ae.CloseAction={}));var an=class{constructor(e){this.name=e,this.restarts=[]}error(e,r,n){return n&&n<=3?on.Continue:on.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?$t.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(A.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),$t.DoNotRestart):(this.restarts.shift(),$t.Restart)}},Pr;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Pr=Ae.RevealOutputChannelOn||(Ae.RevealOutputChannelOn={}));var sn;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(sn=Ae.State||(Ae.State={}));var fe;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(fe||(fe={}));var Fa=[g.SymbolKind.File,g.SymbolKind.Module,g.SymbolKind.Namespace,g.SymbolKind.Package,g.SymbolKind.Class,g.SymbolKind.Method,g.SymbolKind.Property,g.SymbolKind.Field,g.SymbolKind.Constructor,g.SymbolKind.Enum,g.SymbolKind.Interface,g.SymbolKind.Function,g.SymbolKind.Variable,g.SymbolKind.Constant,g.SymbolKind.String,g.SymbolKind.Number,g.SymbolKind.Boolean,g.SymbolKind.Array,g.SymbolKind.Object,g.SymbolKind.Key,g.SymbolKind.Null,g.SymbolKind.EnumMember,g.SymbolKind.Struct,g.SymbolKind.Event,g.SymbolKind.Operator,g.SymbolKind.TypeParameter],gf=[g.CompletionItemKind.Text,g.CompletionItemKind.Method,g.CompletionItemKind.Function,g.CompletionItemKind.Constructor,g.CompletionItemKind.Field,g.CompletionItemKind.Variable,g.CompletionItemKind.Class,g.CompletionItemKind.Interface,g.CompletionItemKind.Module,g.CompletionItemKind.Property,g.CompletionItemKind.Unit,g.CompletionItemKind.Value,g.CompletionItemKind.Enum,g.CompletionItemKind.Keyword,g.CompletionItemKind.Snippet,g.CompletionItemKind.Color,g.CompletionItemKind.File,g.CompletionItemKind.Reference,g.CompletionItemKind.Folder,g.CompletionItemKind.EnumMember,g.CompletionItemKind.Constant,g.CompletionItemKind.Struct,g.CompletionItemKind.Event,g.CompletionItemKind.Operator,g.CompletionItemKind.TypeParameter],Aa=[g.SymbolTag.Deprecated];function W(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var as;(function(t){function e(r){let n=r;return n&&ce.func(n.register)&&ce.func(n.unregister)&&ce.func(n.dispose)&&n.messages!==void 0}t.is=e})(as||(as={}));var et=class{constructor(e,r,n,i,o,u){this._client=e,this._event=r,this._type=n,this._middleware=i,this._createParams=o,this._selectorFilter=u,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(A.languages.match(n,r))return!0;return!1}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(A.languages.match(r,e))return{send:n=>{this.callback(n)}}}},cs=class extends et{constructor(e,r){super(e,A.workspace.onDidOpenTextDocument,g.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),et.textDocumentFilter),this._syncedDocuments=r}get messages(){return g.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){W(W(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){if(super.register(e,r),!r.registerOptions.documentSelector)return;let n=r.registerOptions.documentSelector;A.workspace.textDocuments.forEach(i=>{let o=i.uri.toString();if(!this._syncedDocuments.has(o)&&A.languages.match(n,i)){let u=this._client.clientOptions.middleware,p=f=>{this._client.sendNotification(this._type,this._createParams(f))};u.didOpen?u.didOpen(i,p):p(i),this._syncedDocuments.set(o,i)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},us=class extends et{constructor(e,r){super(e,A.workspace.onDidCloseTextDocument,g.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),et.textDocumentFilter),this._syncedDocuments=r}get messages(){return g.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){W(W(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(A.languages.match(r,i)&&!this._selectorFilter(n,i)){let o=this._client.clientOptions.middleware,u=p=>{this._client.sendNotification(this._type,this._createParams(p))};this._syncedDocuments.delete(i.uri.toString()),o.didClose?o.didClose(i,u):u(i)}})}},ls=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return g.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){W(W(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==g.TextDocumentSyncKind.None&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=A.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(r.id,{documentSelector:r.registerOptions.documentSelector,syncKind:r.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(A.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===g.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(g.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(g.DidChangeTextDocumentNotification.type,i)}else if(r.syncKind===g.TextDocumentSyncKind.Full){let i=o=>{this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(g.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(o.document))})):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new La.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(g.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(o.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(A.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}}}},ds=class extends et{constructor(e){super(e,A.workspace.onWillSaveTextDocument,g.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>et.textDocumentFilter(r,n.document))}get messages(){return g.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:{documentSelector:r}})}},fs=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return g.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=A.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){if(et.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(g.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(o=>{let u=this._client.protocol2CodeConverter.asTextEdits(o);return u===void 0?[]:u});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},hs=class extends et{constructor(e){super(e,A.workspace.onDidSaveTextDocument,g.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),et.textDocumentFilter),this._includeText=!1}get messages(){return g.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){W(W(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register(this.messages,{id:ae.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e,r){this._includeText=!!r.registerOptions.includeText,super.register(e,r)}},ps=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get messages(){return g.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){W(W(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e,r){if(!Array.isArray(r.registerOptions.watchers))return;let n=[];for(let i of r.registerOptions.watchers){if(!ce.string(i.globPattern))continue;let o=!0,u=!0,p=!0;i.kind!==void 0&&i.kind!==null&&(o=(i.kind&g.WatchKind.Create)!==0,u=(i.kind&g.WatchKind.Change)!==0,p=(i.kind&g.WatchKind.Delete)!==0);let f=A.workspace.createFileSystemWatcher(i.globPattern,!o,!u,!p);this.hookListeners(f,o,u,p),n.push(f)}this._watchers.set(r.id,n)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,o){r&&e.onDidCreate(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:g.FileChangeType.Created}),null,o),n&&e.onDidChange(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:g.FileChangeType.Changed}),null,o),i&&e.onDidDelete(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:g.FileChangeType.Deleted}),null,o)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Se=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!r.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],data:r,provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(g.TextDocumentRegistrationOptions.is(r)){let n=g.StaticRegistrationOptions.hasId(r)?r.id:ae.generateUuid(),i=r.documentSelector||e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(ce.boolean(r)&&r===!0||g.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=ce.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[ae.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return ce.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&A.languages.match(n,e))return r.provider}}};Ae.TextDocumentFeature=Se;var gs=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},ms=class extends Se{constructor(e){super(e,g.CompletionRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[g.MarkupKind.Markdown,g.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[g.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveAdditionalTextEditsSupport:!0},r.completionItemKind={valueSet:gf}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(i,o,u,p)=>{let f=this._client,m=this._client.clientOptions.middleware,_=(y,P,x,G)=>f.sendRequest(g.CompletionRequest.type,f.code2ProtocolConverter.asCompletionParams(y,P,x),G).then(f.protocol2CodeConverter.asCompletionResult,z=>f.handleFailedRequest(g.CompletionRequest.type,z,null));return m.provideCompletionItem?m.provideCompletionItem(i,o,p,u,_):_(i,o,p,u)},resolveCompletionItem:e.resolveProvider?(i,o)=>{let u=this._client,p=this._client.clientOptions.middleware,f=(m,_)=>u.sendRequest(g.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(m),_).then(u.protocol2CodeConverter.asCompletionItem,y=>u.handleFailedRequest(g.CompletionResolveRequest.type,y,m));return p.resolveCompletionItem?p.resolveCompletionItem(i,o,f):f(i,o)}:void 0};return[A.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},vs=class extends Se{constructor(e){super(e,g.HoverRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[g.MarkupKind.Markdown,g.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(g.HoverRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asHover,P=>u.handleFailedRequest(g.HoverRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideHover?f.provideHover(n,i,o,p):p(n,i,o)}};return[A.languages.registerHoverProvider(e.documentSelector,r),r]}},ys=class extends Se{constructor(e){super(e,g.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[g.MarkupKind.Markdown,g.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(i,o,u,p)=>{let f=this._client,m=(y,P,x,G)=>f.sendRequest(g.SignatureHelpRequest.type,f.code2ProtocolConverter.asSignatureHelpParams(y,P,x),G).then(f.protocol2CodeConverter.asSignatureHelp,z=>f.handleFailedRequest(g.SignatureHelpRequest.type,z,null)),_=f.clientOptions.middleware;return _.provideSignatureHelp?_.provideSignatureHelp(i,o,p,u,m):m(i,o,p,u)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=A.languages.registerSignatureHelpProvider(e.documentSelector,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=A.languages.registerSignatureHelpProvider(e.documentSelector,r,i)}return[n,r]}},Cs=class extends Se{constructor(e){super(e,g.DefinitionRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(g.DefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asDefinitionResult,P=>u.handleFailedRequest(g.DefinitionRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideDefinition?f.provideDefinition(n,i,o,p):p(n,i,o)}};return[A.languages.registerDefinitionProvider(e.documentSelector,r),r]}},_s=class extends Se{constructor(e){super(e,g.ReferencesRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,i,o,u)=>{let p=this._client,f=(_,y,P,x)=>p.sendRequest(g.ReferencesRequest.type,p.code2ProtocolConverter.asReferenceParams(_,y,P),x).then(p.protocol2CodeConverter.asReferences,G=>p.handleFailedRequest(g.ReferencesRequest.type,G,null)),m=p.clientOptions.middleware;return m.provideReferences?m.provideReferences(n,i,o,u,f):f(n,i,o,u)}};return[A.languages.registerReferenceProvider(e.documentSelector,r),r]}},Rs=class extends Se{constructor(e){super(e,g.DocumentHighlightRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(g.DocumentHighlightRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asDocumentHighlights,P=>u.handleFailedRequest(g.DocumentHighlightRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideDocumentHighlights?f.provideDocumentHighlights(n,i,o,p):p(n,i,o)}};return[A.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},ws=class extends Se{constructor(e){super(e,g.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Fa},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:Aa}}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(f),m).then(_=>{if(_!==null){if(_.length===0)return[];{let y=_[0];return g.DocumentSymbol.is(y)?o.protocol2CodeConverter.asDocumentSymbols(_):o.protocol2CodeConverter.asSymbolInformations(_)}}},_=>o.handleFailedRequest(g.DocumentSymbolRequest.type,_,null)),p=o.clientOptions.middleware;return p.provideDocumentSymbols?p.provideDocumentSymbols(n,i,u):u(n,i)}};return[A.languages.registerDocumentSymbolProvider(e.documentSelector,r),r]}},Ts=class extends gs{constructor(e){super(e,g.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=W(W(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Fa},r.tagSupport={valueSet:Aa}}initialize(e){!e.workspaceSymbolProvider||this.register(this.messages,{id:ae.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.WorkspaceSymbolRequest.type,{query:f},m).then(o.protocol2CodeConverter.asSymbolInformations,_=>o.handleFailedRequest(g.WorkspaceSymbolRequest.type,_,null)),p=o.clientOptions.middleware;return p.provideWorkspaceSymbols?p.provideWorkspaceSymbols(n,i,u):u(n,i)}};return[A.languages.registerWorkspaceSymbolProvider(r),r]}},Ss=class extends Se{constructor(e){super(e,g.CodeActionRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.codeActionLiteralSupport={codeActionKind:{valueSet:[g.CodeActionKind.Empty,g.CodeActionKind.QuickFix,g.CodeActionKind.Refactor,g.CodeActionKind.RefactorExtract,g.CodeActionKind.RefactorInline,g.CodeActionKind.RefactorRewrite,g.CodeActionKind.Source,g.CodeActionKind.SourceOrganizeImports]}}}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,i,o,u)=>{let p=this._client,f=(_,y,P,x)=>{let G={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(_),range:p.code2ProtocolConverter.asRange(y),context:p.code2ProtocolConverter.asCodeActionContext(P)};return p.sendRequest(g.CodeActionRequest.type,G,x).then(z=>{if(z===null)return;let B=[];for(let M of z)g.Command.is(M)?B.push(p.protocol2CodeConverter.asCommand(M)):B.push(p.protocol2CodeConverter.asCodeAction(M));return B},z=>p.handleFailedRequest(g.CodeActionRequest.type,z,null))},m=p.clientOptions.middleware;return m.provideCodeActions?m.provideCodeActions(n,i,o,u,f):f(n,i,o,u)}};return[A.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},Es=class extends Se{constructor(e){super(e,g.CodeLensRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeLensProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeLenses:(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(f),m).then(o.protocol2CodeConverter.asCodeLenses,_=>o.handleFailedRequest(g.CodeLensRequest.type,_,null)),p=o.clientOptions.middleware;return p.provideCodeLenses?p.provideCodeLenses(n,i,u):u(n,i)},resolveCodeLens:e.resolveProvider?(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(f),m).then(o.protocol2CodeConverter.asCodeLens,_=>o.handleFailedRequest(g.CodeLensResolveRequest.type,_,f)),p=o.clientOptions.middleware;return p.resolveCodeLens?p.resolveCodeLens(n,i,u):u(n,i)}:void 0};return[A.languages.registerCodeLensProvider(e.documentSelector,r),r]}},Ps=class extends Se{constructor(e){super(e,g.DocumentFormattingRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,i,o)=>{let u=this._client,p=(m,_,y)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),options:u.code2ProtocolConverter.asFormattingOptions(_)};return u.sendRequest(g.DocumentFormattingRequest.type,P,y).then(u.protocol2CodeConverter.asTextEdits,x=>u.handleFailedRequest(g.DocumentFormattingRequest.type,x,null))},f=u.clientOptions.middleware;return f.provideDocumentFormattingEdits?f.provideDocumentFormattingEdits(n,i,o,p):p(n,i,o)}};return[A.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},Ds=class extends Se{constructor(e){super(e,g.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,i,o,u)=>{let p=this._client,f=(_,y,P,x)=>{let G={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(_),range:p.code2ProtocolConverter.asRange(y),options:p.code2ProtocolConverter.asFormattingOptions(P)};return p.sendRequest(g.DocumentRangeFormattingRequest.type,G,x).then(p.protocol2CodeConverter.asTextEdits,z=>p.handleFailedRequest(g.DocumentRangeFormattingRequest.type,z,null))},m=p.clientOptions.middleware;return m.provideDocumentRangeFormattingEdits?m.provideDocumentRangeFormattingEdits(n,i,o,u,f):f(n,i,o,u)}};return[A.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},bs=class extends Se{constructor(e){super(e,g.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){W(W(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(i,o,u,p,f)=>{let m=this._client,_=(P,x,G,z,B)=>{let M={textDocument:m.code2ProtocolConverter.asTextDocumentIdentifier(P),position:m.code2ProtocolConverter.asPosition(x),ch:G,options:m.code2ProtocolConverter.asFormattingOptions(z)};return m.sendRequest(g.DocumentOnTypeFormattingRequest.type,M,B).then(m.protocol2CodeConverter.asTextEdits,q=>m.handleFailedRequest(g.DocumentOnTypeFormattingRequest.type,q,null))},y=m.clientOptions.middleware;return y.provideOnTypeFormattingEdits?y.provideOnTypeFormattingEdits(i,o,u,p,f,_):_(i,o,u,p,f)}},n=e.moreTriggerCharacter||[];return[A.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},Os=class extends Se{constructor(e){super(e,g.RenameRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);!n||(ce.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register(this.messages,{id:ae.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,i,o,u)=>{let p=this._client,f=(_,y,P,x)=>{let G={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(_),position:p.code2ProtocolConverter.asPosition(y),newName:P};return p.sendRequest(g.RenameRequest.type,G,x).then(p.protocol2CodeConverter.asWorkspaceEdit,z=>p.handleFailedRequest(g.RenameRequest.type,z,null))},m=p.clientOptions.middleware;return m.provideRenameEdits?m.provideRenameEdits(n,i,o,u,f):f(n,i,o,u)},prepareRename:e.prepareProvider?(n,i,o)=>{let u=this._client,p=(m,_,y)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),position:u.code2ProtocolConverter.asPosition(_)};return u.sendRequest(g.PrepareRenameRequest.type,P,y).then(x=>g.Range.is(x)?u.protocol2CodeConverter.asRange(x):x&&g.Range.is(x.range)?{range:u.protocol2CodeConverter.asRange(x.range),placeholder:x.placeholder}:Promise.reject(new Error("The element can't be renamed.")),x=>u.handleFailedRequest(g.PrepareRenameRequest.type,x,void 0))},f=u.clientOptions.middleware;return f.prepareRename?f.prepareRename(n,i,o,p):p(n,i,o)}:void 0};return[A.languages.registerRenameProvider(e.documentSelector,r),r]}},xs=class extends Se{constructor(e){super(e,g.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=W(W(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);!n||this.register(this.messages,{id:ae.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(f),m).then(o.protocol2CodeConverter.asDocumentLinks,_=>o.handleFailedRequest(g.DocumentLinkRequest.type,_,null)),p=o.clientOptions.middleware;return p.provideDocumentLinks?p.provideDocumentLinks(n,i,u):u(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let o=this._client,u=(f,m)=>o.sendRequest(g.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(f),m).then(o.protocol2CodeConverter.asDocumentLink,_=>o.handleFailedRequest(g.DocumentLinkResolveRequest.type,_,f)),p=o.clientOptions.middleware;return p.resolveDocumentLink?p.resolveDocumentLink(n,i,u):u(n,i)}:void 0};return[A.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},ks=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return g.DidChangeConfigurationNotification.type}fillClientCapabilities(e){W(W(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:ae.generateUuid(),registerOptions:{section:e}})}register(e,r){let n=A.workspace.onDidChangeConfiguration(i=>{this.onDidChangeConfiguration(r.registerOptions.section,i)});this._listeners.set(r.id,n),r.registerOptions.section!==void 0&&this.onDidChangeConfiguration(r.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(ce.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(p=>r.affectsConfiguration(p)))return;let i=u=>{if(u===void 0){this._client.sendNotification(g.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(g.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(u)})},o=this.getMiddleware();o?o(n,i):i(n)}extractSettingsInformation(e){function r(o,u){let p=o;for(let f=0;f<u.length-1;f++){let m=p[u[f]];m||(m=Object.create(null),p[u[f]]=m),p=m}return p}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let u=e[o],p=u.indexOf("."),f=null;if(p>=0?f=A.workspace.getConfiguration(u.substr(0,p),n).get(u.substr(p+1)):f=A.workspace.getConfiguration(void 0,n).get(u),f){let m=e[o].split(".");r(i,m)[m[m.length-1]]=lf.toJSONObject(f)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},qs=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return g.ExecuteCommandRequest.type}fillClientCapabilities(e){W(W(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register(this.messages,{id:ae.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,r){let n=this._client,i=n.clientOptions.middleware,o=(u,p)=>{let f={command:u,arguments:p};return n.sendRequest(g.ExecuteCommandRequest.type,f).then(void 0,m=>n.handleFailedRequest(g.ExecuteCommandRequest.type,m,void 0))};if(r.registerOptions.commands){let u=[];for(let p of r.registerOptions.commands)u.push(A.commands.registerCommand(p,(...f)=>i.executeCommand?i.executeCommand(p,f,o):o(p,f)));this._commands.set(r.id,u)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},mf;(function(t){function e(r){return r&&g.MessageReader.is(r.reader)&&g.MessageWriter.is(r.writer)}t.is=e})(mf=Ae.MessageTransports||(Ae.MessageTransports={}));var cn=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Ut=class{constructor(e,r,n){this._traceFormat=g.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||Pr.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||new an(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=fe.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new La.Delayer(250),this._onReady=new Promise((i,o)=>{this._onReadyCallbacks=new cn(i,o)}),this._onStop=void 0,this._telemetryEmitter=new g.Emitter,this._stateChangeEmitter=new g.Emitter,this._trace=g.Trace.Off,this._tracer={log:(i,o)=>{ce.string(i)?this.logTrace(i,o):this.logObjectTrace(i)}},this._c2p=df.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=ff.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===fe.Running?sn.Running:this.state===fe.Starting?sn.Starting:sn.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${ce.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${ce.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${ce.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${ce.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onProgress(e,r,n)}catch(i){throw this.error(`Registering progress handler for token ${r} failed.`,i),i}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=A.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new an(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof g.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?ce.string(e.stack)?e.stack:e.message:ce.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Pr.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Pr.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Pr.Error&&this.showNotificationMessage()}showNotificationMessage(){A.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===fe.Initial||this.state===fe.Stopping||this.state===fe.Stopped}needsStop(){return this.state===fe.Starting||this.state===fe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===fe.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new cn(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?A.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):A.languages.createDiagnosticCollection()),this.state=fe.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case g.MessageType.Error:this.error(r.message,void 0,!1);break;case g.MessageType.Warning:this.warn(r.message,void 0,!1);break;case g.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case g.MessageType.Error:A.window.showErrorMessage(r.message);break;case g.MessageType.Warning:A.window.showWarningMessage(r.message);break;case g.MessageType.Info:A.window.showInformationMessage(r.message);break;default:A.window.showInformationMessage(r.message)}}),e.onRequest(g.ShowMessageRequest.type,r=>{let n;switch(r.type){case g.MessageType.Error:n=A.window.showErrorMessage;break;case g.MessageType.Warning:n=A.window.showWarningMessage;break;case g.MessageType.Info:n=A.window.showInformationMessage;break;default:n=A.window.showInformationMessage}let i=r.actions||[];return n(r.message,...i)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=fe.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),A.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new A.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:"vscode",version:A.version},rootPath:n||null,rootUri:n?this._c2p.asUri(A.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ce.func(r)?r():r,trace:g.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let o=ae.generateUuid(),u=new hf.ProgressPart(e,o);return i.workDoneToken=o,this.doInitialize(e,i).then(p=>(u.done(),p),p=>{throw u.cancel(),p})}else return this.doInitialize(e,i)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=fe.Running;let i;return ce.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===g.TextDocumentSyncKind.None?i={openClose:!1,change:g.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=>this.handleDiagnostics(o)),e.onRequest(g.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(g.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(g.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o)),e.sendNotification(g.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof g.ResponseError&&n.data&&n.data.retry?A.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&A.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=A.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===fe.Stopping&&this._onStop?this._onStop:(this.state=fe.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=fe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=fe.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._dynamicFeatures.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r;let n=this;function i(u){n._fileEvents.push(u),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(p=>{n.isConnectionActive()&&(n.forceDocumentSync(),p.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},p=>{n.error("Notify file events failed.",p)})})}let o=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;o?.didChangeWatchedFile?o.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._dynamicFeatures.get(g.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(r,n,(o,u)=>this.setDiagnostics(o,u)):this.setDiagnostics(r,n)}setDiagnostics(e,r){!this._diagnostics||this._diagnostics.set(e,r)}createConnection(){let e=(n,i,o)=>{this.handleConnectionError(n,i,o)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>pf(n.reader,n.writer,e,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===fe.Stopping||this.state===fe.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=$t.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===$t.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=fe.Stopped,this.cleanUp(!1,!0)):e===$t.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=fe.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===on.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){A.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=A.workspace.getConfiguration(this._id),i=g.Trace.Off,o=g.TraceFormat.Text;if(n){let u=n.get("trace.server","off");typeof u=="string"?i=g.Trace.fromString(u):(i=g.Trace.fromString(n.get("trace.server.verbosity","off")),o=g.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;ce.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(g.DidChangeWatchedFilesNotification.type.method).registerRaw(ae.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),as.is(e)){let r=e.messages;if(Array.isArray(r))for(let n of r)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(r.method,r),this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new ks(this)),this.registerFeature(new cs(this,this._syncedDocuments)),this.registerFeature(new ls(this)),this.registerFeature(new ds(this)),this.registerFeature(new fs(this)),this.registerFeature(new hs(this)),this.registerFeature(new us(this,this._syncedDocuments)),this.registerFeature(new ps(this,e=>this.notifyFileEvent(e))),this.registerFeature(new ms(this)),this.registerFeature(new vs(this)),this.registerFeature(new ys(this)),this.registerFeature(new Cs(this)),this.registerFeature(new _s(this)),this.registerFeature(new Rs(this)),this.registerFeature(new ws(this)),this.registerFeature(new Ts(this)),this.registerFeature(new Ss(this)),this.registerFeature(new Es(this)),this.registerFeature(new Ps(this)),this.registerFeature(new Ds(this)),this.registerFeature(new bs(this)),this.registerFeature(new Os(this)),this.registerFeature(new xs(this)),this.registerFeature(new qs(this))}fillInitializeParams(e){for(let r of this._features)ce.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};W(e,"workspace").applyEdit=!0;let r=W(W(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[g.ResourceOperationKind.Create,g.ResourceOperationKind.Rename,g.ResourceOperationKind.Delete],r.failureHandling=g.FailureHandlingKind.TextOnlyTransactional;let n=W(W(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[g.DiagnosticTag.Unnecessary,g.DiagnosticTag.Deprecated]},n.complexDiagnosticCodeSupport=!0;for(let i of this._features)i.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(!o){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let u=i.registerOptions||{};u.documentSelector=u.documentSelector||this._clientOptions.documentSelector;let p={id:i.id,registerOptions:u};o.register(this._method2Message.get(i.method),p)}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;A.workspace.textDocuments.forEach(o=>n.set(o.uri.toString(),o));let i=!1;if(r.documentChanges){for(let o of r.documentChanges)if(g.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let u=n.get(o.textDocument.uri);if(u&&u.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):ce.asPromise(A.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=>({applied:o})))}handleFailedRequest(e,r,n){if(r instanceof g.ResponseError){if(r.code===g.ErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===g.ErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,r),r}makeCancelError(){let e=new Error(Ut.Canceled);return e.name=Ut.Canceled,e}};Ae.BaseLanguageClient=Ut;Ut.Canceled="Canceled"});var ja=L(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});var un=require("vscode"),Dr=ye(),vf=Ge();function Ma(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Is=class extends vf.TextDocumentFeature{constructor(e){super(e,Dr.DocumentColorRequest.type)}fillClientCapabilities(e){Ma(Ma(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideColorPresentations:(n,i,o)=>{let u=this._client,p=(m,_,y)=>{let P={color:m,textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(_.document),range:u.code2ProtocolConverter.asRange(_.range)};return u.sendRequest(Dr.ColorPresentationRequest.type,P,y).then(this.asColorPresentations.bind(this),x=>u.handleFailedRequest(Dr.ColorPresentationRequest.type,x,null))},f=u.clientOptions.middleware;return f.provideColorPresentations?f.provideColorPresentations(n,i,o,p):p(n,i,o)},provideDocumentColors:(n,i)=>{let o=this._client,u=(f,m)=>{let _={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f)};return o.sendRequest(Dr.DocumentColorRequest.type,_,m).then(this.asColorInformations.bind(this),y=>o.handleFailedRequest(Dr.ColorPresentationRequest.type,y,null))},p=o.clientOptions.middleware;return p.provideDocumentColors?p.provideDocumentColors(n,i,u):u(n,i)}};return[un.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new un.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new un.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new un.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};Ns.ColorProviderFeature=Is});var Wa=L(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});var yf=require("vscode"),Ls=ye(),Cf=Ge();function Ha(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Fs=class extends Cf.TextDocumentFeature{constructor(e){super(e,Ls.ImplementationRequest.type)}fillClientCapabilities(e){let r=Ha(Ha(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideImplementation:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(Ls.ImplementationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asDefinitionResult,P=>u.handleFailedRequest(Ls.ImplementationRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideImplementation?f.provideImplementation(n,i,o,p):p(n,i,o)}};return[yf.languages.registerImplementationProvider(e.documentSelector,r),r]}};As.ImplementationFeature=Fs});var za=L(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var _f=require("vscode"),Ms=ye(),Rf=Ge();function ln(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var js=class extends Rf.TextDocumentFeature{constructor(e){super(e,Ms.TypeDefinitionRequest.type)}fillClientCapabilities(e){ln(ln(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=ln(ln(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(Ms.TypeDefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asDefinitionResult,P=>u.handleFailedRequest(Ms.TypeDefinitionRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideTypeDefinition?f.provideTypeDefinition(n,i,o,p):p(n,i,o)}};return[_f.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};Hs.TypeDefinitionFeature=js});var Ka=L(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var wf=ts(),dn=require("vscode"),Ws=ye();function zs(t,e){if(t!==void 0)return t[e]}function Ks(t,e){return t.filter(r=>e.indexOf(r)<0)}fn.arrayDiff=Ks;var $s=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return Ws.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=dn.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Ws.WorkspaceFoldersRequest.type,o=>{let u=()=>{let f=dn.workspace.workspaceFolders;return f===void 0?null:f.map(_=>this.asProtocol(_))},p=r.clientOptions.middleware.workspace;return p&&p.workspaceFolders?p.workspaceFolders(o,u):u(o)});let n=zs(zs(zs(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=wf.generateUuid()),i&&this.register(this.messages,{id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=Ks(this._initialFolders,e),n=Ks(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};this._client.sendNotification(Ws.DidChangeWorkspaceFoldersNotification.type,n)}register(e,r){let n=r.id,i=this._client,o=dn.workspace.onDidChangeWorkspaceFolders(u=>{let p=m=>{this.doSendEvent(m.added,m.removed)},f=i.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(u,p):p(u)});this._listeners.set(n,o),this.sendInitialEvent(dn.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};fn.WorkspaceFoldersFeature=$s});var Ua=L(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var br=require("vscode"),dr=ye(),Tf=Ge();function $a(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var fr=class extends Tf.TextDocumentFeature{constructor(e){super(e,dr.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=$a($a(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,i,o)=>{let u=this._client,p=(m,_,y)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m)};return u.sendRequest(dr.FoldingRangeRequest.type,P,y).then(fr.asFoldingRanges,x=>u.handleFailedRequest(dr.FoldingRangeRequest.type,x,null))},f=u.clientOptions.middleware;return f.provideFoldingRanges?f.provideFoldingRanges(n,i,o,p):p(n,i,o)}};return[br.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}static asFoldingRangeKind(e){if(e)switch(e){case dr.FoldingRangeKind.Comment:return br.FoldingRangeKind.Comment;case dr.FoldingRangeKind.Imports:return br.FoldingRangeKind.Imports;case dr.FoldingRangeKind.Region:return br.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new br.FoldingRange(r.startLine,r.endLine,fr.asFoldingRangeKind(r.kind))):[]}};Us.FoldingRangeFeature=fr});var Ba=L(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var Sf=require("vscode"),Gs=ye(),Ef=Ge();function Ga(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Bs=class extends Ef.TextDocumentFeature{constructor(e){super(e,Gs.DeclarationRequest.type)}fillClientCapabilities(e){let r=Ga(Ga(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideDeclaration:(n,i,o)=>{let u=this._client,p=(m,_,y)=>u.sendRequest(Gs.DeclarationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,_),y).then(u.protocol2CodeConverter.asDeclarationResult,P=>u.handleFailedRequest(Gs.DeclarationRequest.type,P,null)),f=u.clientOptions.middleware;return f.provideDeclaration?f.provideDeclaration(n,i,o,p):p(n,i,o)}};return[Sf.languages.registerDeclarationProvider(e.documentSelector,r),r]}};Xs.DeclarationFeature=Bs});var Ja=L(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Pf=require("vscode"),Js=ye(),Df=Ge();function Xa(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Vs=class extends Df.TextDocumentFeature{constructor(e){super(e,Js.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=Xa(Xa(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,i,o)=>{let u=this._client,p=(m,_,y)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),positions:u.code2ProtocolConverter.asPositions(_)};return u.sendRequest(Js.SelectionRangeRequest.type,P,y).then(x=>u.protocol2CodeConverter.asSelectionRanges(x),x=>u.handleFailedRequest(Js.SelectionRangeRequest.type,x,null))},f=u.clientOptions.middleware;return f.provideSelectionRanges?f.provideSelectionRanges(n,i,o,p):p(n,i,o)}};return[Pf.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};Qs.SelectionRangeFeature=Vs});var Va=L(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var bf=ye(),Of=ss();function xf(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Ys=class{constructor(e){this._client=e}fillClientCapabilities(e){xf(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=n=>{new Of.ProgressPart(this._client,n.token)};e.onRequest(bf.WorkDoneProgressCreateRequest.type,r)}};Zs.ProgressFeature=Ys});var Ya=L(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var hn=require("vscode"),Gt=ye(),kf=Ge();function Qa(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Or;(function(t){function e(p,f){if(f===null)return;let m=new hn.CallHierarchyItem(p.asSymbolKind(f.kind),f.name,f.detail||"",p.asUri(f.uri),p.asRange(f.range),p.asRange(f.selectionRange));return f.tags!==void 0&&(m.tags=p.asSymbolTags(f.tags)),m}t.asCallHierarchyItem=e;function r(p,f){if(f!==null)return f.map(m=>e(p,m))}t.asCallHierarchyItems=r;function n(p,f){return new hn.CallHierarchyIncomingCall(e(p,f.from),p.asRanges(f.fromRanges))}t.asCallHierarchyIncomingCall=n;function i(p,f){if(f!==null)return f.map(m=>n(p,m))}t.asCallHierarchyIncomingCalls=i;function o(p,f){return new hn.CallHierarchyOutgoingCall(e(p,f.to),p.asRanges(f.fromRanges))}t.asCallHierarchyOutgoingCall=o;function u(p,f){if(f!==null)return f.map(m=>o(p,m))}t.asCallHierarchyOutgoingCalls=u})(Or||(Or={}));var pn;(function(t){function e(r,n){let i={name:n.name,kind:r.asSymbolKind(n.kind),uri:r.asUri(n.uri),range:r.asRange(n.range),selectionRange:r.asRange(n.selectionRange)};return n.detail!==void 0&&n.detail.length>0&&(i.detail=n.detail),n.tags!==void 0&&(i.tags=r.asSymbolTags(n.tags)),i}t.asCallHierarchyItem=e})(pn||(pn={}));var eo=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let i=this.client,o=this.middleware,u=(p,f,m)=>{let _=i.code2ProtocolConverter.asTextDocumentPositionParams(p,f);return i.sendRequest(Gt.CallHierarchyPrepareRequest.type,_,m).then(y=>Or.asCallHierarchyItems(this.client.protocol2CodeConverter,y),y=>i.handleFailedRequest(Gt.CallHierarchyPrepareRequest.type,y,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,r,n,u):u(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,o=(u,p)=>{let f={item:pn.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(Gt.CallHierarchyIncomingCallsRequest.type,f,p).then(m=>Or.asCallHierarchyIncomingCalls(n.protocol2CodeConverter,m),m=>n.handleFailedRequest(Gt.CallHierarchyIncomingCallsRequest.type,m,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,o):o(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,o=(u,p)=>{let f={item:pn.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(Gt.CallHierarchyOutgoingCallsRequest.type,f,p).then(m=>Or.asCallHierarchyOutgoingCalls(n.protocol2CodeConverter,m),m=>n.handleFailedRequest(Gt.CallHierarchyOutgoingCallsRequest.type,m,null))};return i.provideCallHierarchyOutgingCalls?i.provideCallHierarchyOutgingCalls(e,r,o):o(e,r)}},to=class extends kf.TextDocumentFeature{constructor(e){super(e,Gt.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=Qa(Qa(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register(this.messages,{id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new eo(r);return[hn.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};ro.CallHierarchyFeature=to});var ec=L(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});var hr=require("vscode"),qf=Ge(),Q=ye(),If=Ai();function Za(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Bt;(function(t){function e(o){if(o!=null)return new hr.SemanticTokens(new Uint32Array(o.data),o.resultId)}t.asSemanticTokens=e;function r(o){return new hr.SemanticTokensEdit(o.start,o.deleteCount,o.data!==void 0?new Uint32Array(o.data):void 0)}t.asSemanticTokensEdit=r;function n(o){if(o!=null)return new hr.SemanticTokensEdits(o.edits.map(r),o.resultId)}t.asSemanticTokensEdits=n;function i(o){return o}t.asLegend=i})(Bt||(Bt={}));var no=class extends qf.TextDocumentFeature{constructor(e){super(e,Q.Proposed.SemanticTokensRequest.type)}fillClientCapabilities(e){let n=Za(Za(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[Q.Proposed.SemanticTokenTypes.namespace,Q.Proposed.SemanticTokenTypes.type,Q.Proposed.SemanticTokenTypes.class,Q.Proposed.SemanticTokenTypes.enum,Q.Proposed.SemanticTokenTypes.interface,Q.Proposed.SemanticTokenTypes.struct,Q.Proposed.SemanticTokenTypes.typeParameter,Q.Proposed.SemanticTokenTypes.parameter,Q.Proposed.SemanticTokenTypes.variable,Q.Proposed.SemanticTokenTypes.property,Q.Proposed.SemanticTokenTypes.enumMember,Q.Proposed.SemanticTokenTypes.event,Q.Proposed.SemanticTokenTypes.function,Q.Proposed.SemanticTokenTypes.member,Q.Proposed.SemanticTokenTypes.macro,Q.Proposed.SemanticTokenTypes.keyword,Q.Proposed.SemanticTokenTypes.modifier,Q.Proposed.SemanticTokenTypes.comment,Q.Proposed.SemanticTokenTypes.string,Q.Proposed.SemanticTokenTypes.number,Q.Proposed.SemanticTokenTypes.regexp,Q.Proposed.SemanticTokenTypes.operator],n.tokenModifiers=[Q.Proposed.SemanticTokenModifiers.declaration,Q.Proposed.SemanticTokenModifiers.definition,Q.Proposed.SemanticTokenModifiers.readonly,Q.Proposed.SemanticTokenModifiers.static,Q.Proposed.SemanticTokenModifiers.deprecated,Q.Proposed.SemanticTokenModifiers.abstract,Q.Proposed.SemanticTokenModifiers.async,Q.Proposed.SemanticTokenModifiers.modification,Q.Proposed.SemanticTokenModifiers.documentation,Q.Proposed.SemanticTokenModifiers.defaultLibrary],n.formats=[If.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}}}initialize(e,r){let n=e,[i,o]=this.getRegistration(r,n.semanticTokensProvider);!i||!o||this.register(this.messages,{id:i,registerOptions:o})}registerLanguageProvider(e){let r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,n={provideDocumentSemanticTokens:(f,m)=>{let _=this._client,y=_.clientOptions.middleware,P=(x,G)=>{let z={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(x)};return _.sendRequest(Q.Proposed.SemanticTokensRequest.type,z,G).then(B=>Bt.asSemanticTokens(B),B=>_.handleFailedRequest(Q.Proposed.SemanticTokensRequest.type,B,null))};return y.provideDocumentSemanticTokens?y.provideDocumentSemanticTokens(f,m,P):P(f,m)},provideDocumentSemanticTokensEdits:r?(f,m,_)=>{let y=this._client,P=y.clientOptions.middleware,x=(G,z,B)=>{let M={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(G),previousResultId:z};return y.sendRequest(Q.Proposed.SemanticTokensDeltaRequest.type,M,B).then(q=>Q.Proposed.SemanticTokens.is(q)?Bt.asSemanticTokens(q):Bt.asSemanticTokensEdits(q),q=>y.handleFailedRequest(Q.Proposed.SemanticTokensDeltaRequest.type,q,null))};return P.provideDocumentSemanticTokensEdits?P.provideDocumentSemanticTokensEdits(f,m,_,x):x(f,m,_)}:void 0},o=e.range===!0?{provideDocumentRangeSemanticTokens:(f,m,_)=>{let y=this._client,P=y.clientOptions.middleware,x=(G,z,B)=>{let M={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(G),range:y.code2ProtocolConverter.asRange(z)};return y.sendRequest(Q.Proposed.SemanticTokensRangeRequest.type,M,B).then(q=>Bt.asSemanticTokens(q),q=>y.handleFailedRequest(Q.Proposed.SemanticTokensRangeRequest.type,q,null))};return P.provideDocumentRangeSemanticTokens?P.provideDocumentRangeSemanticTokens(f,m,_,x):x(f,m,_)}}:void 0,u=[],p=Bt.asLegend(e.legend);return u.push(hr.languages.registerDocumentSemanticTokensProvider(e.documentSelector,n,p)),o!==void 0&&u.push(hr.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,o,p)),[new hr.Disposable(()=>u.forEach(f=>f.dispose())),{document:n,range:o}]}};io.SemanticTokensFeature=no});var oo=L(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});var Nf=Ge(),Lf=ja(),Ff=Hi(),Af=Wa(),Mf=za(),jf=Ka(),Hf=Ua(),Wf=Ba(),zf=Ja(),Kf=Va(),$f=Ya(),Uf=ec(),so=class extends Nf.BaseLanguageClient{constructor(e,r,n){super(e,r,n)}registerProposedFeatures(){this.registerFeatures(tc.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Ff.ConfigurationFeature(this)),this.registerFeature(new Mf.TypeDefinitionFeature(this)),this.registerFeature(new Af.ImplementationFeature(this)),this.registerFeature(new Lf.ColorProviderFeature(this)),this.registerFeature(new jf.WorkspaceFoldersFeature(this)),this.registerFeature(new Hf.FoldingRangeFeature(this)),this.registerFeature(new Wf.DeclarationFeature(this)),this.registerFeature(new zf.SelectionRangeFeature(this)),this.registerFeature(new Kf.ProgressFeature(this)),this.registerFeature(new $f.CallHierarchyFeature(this))}};xr.CommonLanguageClient=so;var tc;(function(t){function e(r){return[new Uf.SemanticTokensFeature(r)]}t.createAll=e})(tc=xr.ProposedFeatures||(xr.ProposedFeatures={}))});var nc=L(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});var rc=require("child_process"),Gf=require("path"),Bf=process.platform==="win32",Xf=process.platform==="darwin",Jf=process.platform==="linux";function Vf(t,e){if(Bf)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),rc.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(Jf||Xf)try{var r=Gf.join(__dirname,"terminateProcess.sh"),n=rc.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}ao.terminate=Vf});var co=L((dp,ic)=>{"use strict";ic.exports=ye()});var sc=L(gn=>{"use strict";function uo(t){for(var e in t)gn.hasOwnProperty(e)||(gn[e]=t[e])}Object.defineProperty(gn,"__esModule",{value:!0});uo(ye());uo(Ge());uo(oo())});var uc=L(Ot=>{"use strict";function cc(t){for(var e in t)Ot.hasOwnProperty(e)||(Ot[e]=t[e])}Object.defineProperty(Ot,"__esModule",{value:!0});var Xt=require("child_process"),Qf=require("fs"),oc=Po(),bt=require("vscode"),me=Qt(),Yf=oo(),Zf=Ge(),eh=nc(),ge=co();cc(co());cc(sc());var ac="^1.46.0",lo;(function(t){function e(r){return me.string(r.command)}t.is=e})(lo||(lo={}));var Ee;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Ee=Ot.TransportKind||(Ot.TransportKind={}));var pr;(function(t){function e(r){let n=r;return n&&n.kind===Ee.socket&&me.number(n.port)}t.isSocket=e})(pr||(pr={}));var fo;(function(t){function e(r){return me.string(r.module)}t.is=e})(fo||(fo={}));var ho;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(ho||(ho={}));var po;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(po||(po={}));var go=class extends Yf.CommonLanguageClient{constructor(e,r,n,i,o){let u,p,f,m,_;me.string(r)?(u=e,p=r,f=n,m=i,_=!!o):(u=e.toLowerCase(),p=e,f=r,m=n,_=i),_===void 0&&(_=!1),super(u,p,m),this._serverOptions=f,this._forceDebug=_;try{this.checkVersion()}catch(y){throw me.string(y.message)&&this.outputChannel.appendLine(y.message),y}}checkVersion(){let e=oc.parse(bt.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${bt.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!oc.satisfies(e,ac))throw new Error(`The language client requires VS Code version ${ac} but received version ${bt.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),eh.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(_,y){if(!_&&!y)return;let P=Object.create(null);return Object.keys(process.env).forEach(x=>P[x]=process.env[x]),y&&(P.ELECTRON_RUN_AS_NODE="1",P.ELECTRON_NO_ASAR="1"),_&&Object.keys(_).forEach(x=>P[x]=_[x]),P}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let _=process.execArgv;return _?_.some(y=>n.some(P=>y.startsWith(P))||i.some(P=>y===P)):!1}function u(_){if(_.stdin===null||_.stdout===null||_.stderr===null)throw new Error("Process created without stdio streams")}let p=this._serverOptions;if(me.func(p))return p().then(_=>{if(Zf.MessageTransports.is(_))return this._isDetached=!!_.detached,_;if(ho.is(_))return this._isDetached=!!_.detached,{reader:new ge.StreamMessageReader(_.reader),writer:new ge.StreamMessageWriter(_.writer)};{let y;return po.is(_)?(y=_.process,this._isDetached=_.detached):(y=_,this._isDetached=!1),y.stderr.on("data",P=>this.outputChannel.append(me.string(P)?P:P.toString(e))),{reader:new ge.StreamMessageReader(y.stdout),writer:new ge.StreamMessageWriter(y.stdin)}}});let f,m=p;return m.run||m.debug?this._forceDebug||o()?f=m.debug:f=m.run:f=p,this._getServerWorkingDir(f.options).then(_=>{if(fo.is(f)&&f.module){let y=f,P=y.transport||Ee.stdio;if(y.runtime){let x=[],G=y.options||Object.create(null);G.execArgv&&G.execArgv.forEach(M=>x.push(M)),x.push(y.module),y.args&&y.args.forEach(M=>x.push(M));let z=Object.create(null);z.cwd=_,z.env=r(G.env,!1);let B;if(P===Ee.ipc?(z.stdio=[null,null,null,"ipc"],x.push("--node-ipc")):P===Ee.stdio?x.push("--stdio"):P===Ee.pipe?(B=ge.generateRandomPipeName(),x.push(`--pipe=${B}`)):pr.isSocket(P)&&x.push(`--socket=${P.port}`),x.push(`--clientProcessId=${process.pid.toString()}`),P===Ee.ipc||P===Ee.stdio){let M=Xt.spawn(y.runtime,x,z);return!M||!M.pid?Promise.reject(`Launching server using runtime ${y.runtime} failed.`):(this._serverProcess=M,M.stderr.on("data",q=>this.outputChannel.append(me.string(q)?q:q.toString(e))),P===Ee.ipc?(M.stdout.on("data",q=>this.outputChannel.append(me.string(q)?q:q.toString(e))),Promise.resolve({reader:new ge.IPCMessageReader(M),writer:new ge.IPCMessageWriter(M)})):Promise.resolve({reader:new ge.StreamMessageReader(M.stdout),writer:new ge.StreamMessageWriter(M.stdin)}))}else{if(P===Ee.pipe)return ge.createClientPipeTransport(B).then(M=>{let q=Xt.spawn(y.runtime,x,z);return!q||!q.pid?Promise.reject(`Launching server using runtime ${y.runtime} failed.`):(this._serverProcess=q,q.stderr.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),q.stdout.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),M.onConnected().then(j=>({reader:j[0],writer:j[1]})))});if(pr.isSocket(P))return ge.createClientSocketTransport(P.port).then(M=>{let q=Xt.spawn(y.runtime,x,z);return!q||!q.pid?Promise.reject(`Launching server using runtime ${y.runtime} failed.`):(this._serverProcess=q,q.stderr.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),q.stdout.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),M.onConnected().then(j=>({reader:j[0],writer:j[1]})))})}}else{let x;return new Promise((G,z)=>{let B=y.args&&y.args.slice()||[];P===Ee.ipc?B.push("--node-ipc"):P===Ee.stdio?B.push("--stdio"):P===Ee.pipe?(x=ge.generateRandomPipeName(),B.push(`--pipe=${x}`)):pr.isSocket(P)&&B.push(`--socket=${P.port}`),B.push(`--clientProcessId=${process.pid.toString()}`);let M=y.options||Object.create(null);if(M.env=r(M.env,!0),M.execArgv=M.execArgv||[],M.cwd=_,M.silent=!0,P===Ee.ipc||P===Ee.stdio){let q=Xt.fork(y.module,B||[],M);u(q),this._serverProcess=q,q.stderr.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),P===Ee.ipc?(q.stdout.on("data",j=>this.outputChannel.append(me.string(j)?j:j.toString(e))),G({reader:new ge.IPCMessageReader(this._serverProcess),writer:new ge.IPCMessageWriter(this._serverProcess)})):G({reader:new ge.StreamMessageReader(q.stdout),writer:new ge.StreamMessageWriter(q.stdin)})}else P===Ee.pipe?ge.createClientPipeTransport(x).then(q=>{let j=Xt.fork(y.module,B||[],M);u(j),this._serverProcess=j,j.stderr.on("data",K=>this.outputChannel.append(me.string(K)?K:K.toString(e))),j.stdout.on("data",K=>this.outputChannel.append(me.string(K)?K:K.toString(e))),q.onConnected().then(K=>{G({reader:K[0],writer:K[1]})})}):pr.isSocket(P)&&ge.createClientSocketTransport(P.port).then(q=>{let j=Xt.fork(y.module,B||[],M);u(j),this._serverProcess=j,j.stderr.on("data",K=>this.outputChannel.append(me.string(K)?K:K.toString(e))),j.stdout.on("data",K=>this.outputChannel.append(me.string(K)?K:K.toString(e))),q.onConnected().then(K=>{G({reader:K[0],writer:K[1]})})})})}}else if(lo.is(f)&&f.command){let y=f,P=y.args||[],x=Object.assign({},y.options);x.cwd=x.cwd||_;let G=Xt.spawn(y.command,P,x);return!G||!G.pid?Promise.reject(`Launching server using command ${y.command} failed.`):(G.stderr.on("data",z=>this.outputChannel.append(me.string(z)?z:z.toString(e))),this._serverProcess=G,this._isDetached=!!x.detached,Promise.resolve({reader:new ge.StreamMessageReader(G.stdout),writer:new ge.StreamMessageWriter(G.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(p,null,4)))})}_mainGetRootPath(){let e=bt.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{Qf.lstat(r,(i,o)=>{n(!i&&o.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}};Ot.LanguageClient=go;var mo=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return bt.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new bt.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?bt.workspace.getConfiguration(r).get(n,!1):bt.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Ot.SettingMonitor=mo});var dc=L((pp,lc)=>{"use strict";lc.exports=uc()});var ch={};Rc(ch,{activate:()=>sh});module.exports=wc(ch);var pc=Jt(require("path")),yo=Jt(require("vscode")),Co=require("vscode"),kr=Jt(dc()),gc=Jt(Xr());var fc=Jt(require("os")),Be=Jt(require("vscode")),gp=fc.tmpdir(),mn=class{constructor(){this._terminal=null}dispose(){}onDidCloseTerminal(){this._terminal=null}async getCurrentFile(e){if(this._runFromExplorer=this.checkIsRunFromExplorer(e),this._runFromExplorer)this._document=await Be.workspace.openTextDocument(e);else{let r=Be.window.activeTextEditor;if(r)this._document=r.document;else{Be.window.showInformationMessage("No code found or selected.");return}}return this._document}checkIsRunFromExplorer(e){let r=Be.window.activeTextEditor;return!e||!e.fsPath?!1:r?e.fsPath!==r.document.uri.fsPath:!0}initialize(){this._config=this.getConfiguration("caie-pseudocode")}getConfiguration(e){return this._document?Be.workspace.getConfiguration(e,this._document.uri):Be.workspace.getConfiguration(e)}getWorkspaceFolder(){if(Be.workspace.workspaceFolders){if(this._document){let e=Be.workspace.getWorkspaceFolder(this._document.uri);if(e)return e.uri.fsPath}return Be.workspace.workspaceFolders[0].uri.fsPath}else return}getWorkspaceRoot(e){return this._workspaceFolder?this._workspaceFolder:e}getCodeBaseFile(){let e=this._codeFile.match(/.*[\/\\](.*)/);return e?e[1]:this._codeFile}getCodeFileWithoutDirAndExt(){let e=this._codeFile.match(/.*[\/\\](.*(?=\..*))/);return e?e[1]:this._codeFile}getCodeFileDir(){let e=this._codeFile.match(/(.*[\/\\]).*/);return e?e[1]:this._codeFile}getDriveLetter(){let e=this._codeFile.match(/^([A-Za-z]:).*/);return e?e[1]:"$driveLetter"}getCodeFileDirWithoutTrailingSlash(){return this.getCodeFileDir().replace(/[\/\\]$/,"")}quoteFileName(e){return'"'+e+'"'}async executeCommandInTerminal(e){let r=!1;this._terminal===null&&(this._terminal=Be.window.createTerminal("CAIE Pseudocode"),r=!0),this._terminal.sendText(e),this._terminal.show(!1)}};var vn=!1,th=vn?"dotnet":"PseudoCode.LSP",hc=vn?["/Users/mac/RiderProjects/PseudoCode/PseudoCode.LSP/bin/Debug/net6.0/PseudoCode.LSP.dll"]:[],rh=vn?"dotnet":"PseudoCode.Cli",nh=vn?["/Users/mac/RiderProjects/PseudoCode/PseudoCode.Cli/bin/Debug/net6.0/PseudoCode.Cli.dll"]:[],vo=new mn;function ih(){var t=[],e=Co.workspace.getConfiguration("pseudocode.runtime");return e.get("strictVariables")&&t.push("-S"),e.get("printOperations")&&t.push("-c"),nh.concat(t)}function sh(t){console.log("hi");let e=th,r={run:{command:e,args:hc,transport:kr.TransportKind.pipe},debug:{command:e,args:hc,transport:kr.TransportKind.pipe,runtime:""}},n={documentSelector:[{pattern:"**/*.pseudo"},{pattern:"**/*.p"}],progressOnInitialization:!0,synchronize:{configurationSection:"pseudocode",fileEvents:Co.workspace.createFileSystemWatcher("**/*.pseudo")}},i=new kr.LanguageClient("pseudocode","PseudoCode Language Client",r,n);i.registerProposedFeatures(),i.trace=gc.Trace.Verbose;let o=i.start();t.subscriptions.push(o),oh(t),ah(t)}function oh(t){let e="caie-pseudocode.run",r=n=>{vo.getCurrentFile(n).then(i=>{vo.executeCommandInTerminal(`cd "${pc.dirname(i.fileName)}"
${rh} ${ih().join(" ")} "${i.fileName}"`)})};t.subscriptions.push(yo.commands.registerCommand(e,r))}function ah(t){let e="caie-pseudocode.update",r=()=>{vo.executeCommandInTerminal("PseudoCode.Update")};t.subscriptions.push(yo.commands.registerCommand(e,r))}0&&(module.exports={activate});
